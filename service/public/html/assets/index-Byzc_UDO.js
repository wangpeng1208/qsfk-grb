import{d as P,e as d,l as C,r as U,k as z,f as F,o as a,c as r,w as e,g as T,h as f,b as i,a as s,t as K,u as O,n as j,T as q,b$ as G,M as b,c0 as H,B as J}from"./index-Bl4AiOyE.js";import{p as Q}from"./global-DaymibWd.js";import{c as W,_ as X}from"./edit.vue_vue_type_script_setup_true_lang-VzyyZ4rl.js";import Y from"./chevron-right-CXRL2pxh.js";import Z from"./chevron-down-DGbIUXDN.js";import{I as ee}from"./index-DaVESe2P.js";import{T as te}from"./index-C23pHn_u.js";import{L as oe}from"./index-DYrnlY5q.js";import{P as ne}from"./index-BHe90IKu.js";import{S as ae}from"./index-CmSpUa39.js";import{E as re}from"./index-tzykTWLw.js";import{C as ie}from"./index-DgoDdsYb.js";import"./icon-CPt8GYZ3.js";import"./index-BKyk21AZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CkUJmLKO.js";import"./helper-VFi8r3PY.js";import"./useVModel-HmF1Gebj.js";import"./dep-d524834c-s9Vwwbzr.js";import"./dep-86139c71-_Dj3X0D4.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./dep-af55fe23-C5ZQDf4C.js";import"./dep-96cefb8b-D_Qrr7tD.js";import"./common-CF_MvV9u.js";import"./useLengthLimit-zZTqNE_r.js";import"./log-ZJhmUOBa.js";import"./useResizeObserver-BUPtuDKJ.js";import"./index-DZCrjQ_3.js";import"./form-model-BN3AK5Zp.js";import"./dep-4cc4ef27-Bxo4BcuK.js";import"./const-BLdXWxIl.js";import"./close-circle-filled-xz65pYuL.js";import"./index-uPwIzCpa.js";import"./index-DyWz2VZ8.js";import"./useDefaultValue-DgMKt5hR.js";import"./index-BuecJDAw.js";import"./observe-CfjnoQGd.js";import"./useReadonly-DZtTxOfz.js";import"./slot-BjrDC6aI.js";import"./tree-store-D6Nt-HJf.js";import"./dep-eedf0c29-Hg3zrHFZ.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./useVirtualScrollNew-BJRfmUbB.js";import"./dep-02de0cb4-B9D_IUaB.js";import"./index-BXun50hP.js";import"./index-BACtxuGn.js";import"./index-CLnbRl90.js";import"./browse-CCDZKZZU.js";import"./useCommonClassName-B8MbwXBA.js";import"./index-CCnSBKQl.js";import"./number-jGqlEXl8.js";import"./index-ChiVvrNs.js";import"./index-BjJKviJA.js";import"./index-BtiChZpX.js";import"./index-B8hTW5gB.js";import"./chevron-left-BBFgH3SA.js";import"./chevron-right-BZPeNPTA.js";import"./dep-1858b432-B1ibg8Ju.js";const se={class:"category-header c-flex"},me={class:"l"},ut=P({__name:"index",setup(pe){const y=d([]),N=(o,{type:n})=>o(n==="expand"?Y:Z),R=C(()=>N),u=d(null),l=d(!1);function w(){l.value=!l.value,A()}const A=async()=>{await q(),l.value?u.value.expandAll():u.value.foldAll()},_=d([]),h=async()=>{const o=await G({});o.code?_.value=o.data.list:b.error({content:o.msg,duration:0,closeBtn:!0})};h();const B=U({childrenKey:"children",treeNodeColumnIndex:0,indent:25,expandTreeNodeOnClick:!1}),g=d(),v=(o=0,n=0)=>{var m;(m=g.value)==null||m.init(o,n)},$=async o=>{const{msg:n}=await H({id:o});b.success(n),h()},E=z(),S=C(()=>({offsetTop:E.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(o,n)=>{const m=J,D=ee,p=te,x=oe,I=ne,V=ae,L=re,M=ie,c=F("perms");return a(),r(M,{title:"菜单管理",class:"basic-container",bordered:!1},{default:e(()=>[T("div",se,[T("div",me,[f((a(),r(m,{theme:"primary",onClick:n[0]||(n[0]=t=>v())},{default:e(()=>[i("添加")]),_:1})),[[c,["adminapi/permission/menu/add"]]]),s(m,{theme:"default",onClick:w},{default:e(()=>[i(K(l.value?"收起全部":"展开全部"),1)]),_:1})])]),s(L,{ref_key:"tableRef",ref:u,expandedTreeNodes:y.value,"onUpdate:expandedTreeNodes":n[1]||(n[1]=t=>y.value=t),"row-key":"id",data:_.value,columns:O(W),tree:B,hover:_.value.length>0,"max-height":"auto","table-layout":"auto","header-affixed-top":S.value,"tree-expand-and-fold-icon":R.value,"lazy-load":""},{icon:e(({row:t})=>[s(D,{name:t.icon},null,8,["name"])]),hidden:e(({row:t})=>[t.hidden==1?(a(),r(p,{key:0,theme:"danger",variant:"light"},{default:e(()=>[i("隐藏")]),_:1})):(a(),r(p,{key:1,theme:"success",variant:"light"},{default:e(()=>[i("显示")]),_:1}))]),type:e(({row:t})=>[t.type=="L"?(a(),r(p,{key:0,theme:"success",variant:"light"},{default:e(()=>[i("目录")]),_:1})):t.type=="M"?(a(),r(p,{key:1,theme:"primary",variant:"light"},{default:e(()=>[i("菜单")]),_:1})):t.type=="B"?(a(),r(p,{key:2,theme:"warning",variant:"light"},{default:e(()=>[i("按钮")]),_:1})):j("",!0)]),operate:e(({row:t})=>[s(V,null,{default:e(()=>[f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(0,t.id)},{default:e(()=>[i("添加")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/add"]]]),f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(t.id)},{default:e(()=>[i("编辑")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/edit"]]]),s(I,{content:"确认删除吗",onConfirm:k=>$(t.id)},{default:e(()=>[f((a(),r(x,{theme:"danger",hover:"color"},{default:e(()=>[i(" 删除 ")]),_:1})),[[c,["adminapi/permission/menu/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["expandedTreeNodes","data","columns","tree","hover","header-affixed-top","tree-expand-and-fold-icon"]),s(X,{ref_key:"editRef",ref:g,onSuccess:h},null,512)]),_:1})}}});export{ut as default};
