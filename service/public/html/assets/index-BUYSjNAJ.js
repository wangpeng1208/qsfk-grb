import{d as P,e as d,l as C,r as U,k as z,f as F,o as a,c as r,w as e,g as T,h as f,b as i,a as s,t as K,u as O,n as j,T as q,b$ as G,M as b,c0 as H,B as J}from"./index-DyfhlEKp.js";import{p as Q}from"./global-DaymibWd.js";import{c as W,_ as X}from"./edit.vue_vue_type_script_setup_true_lang-OTRnR4nc.js";import Y from"./chevron-right-CY2R3S4D.js";import Z from"./chevron-down-DACa9Ua0.js";import{I as ee}from"./index-D6uIAV1D.js";import{T as te}from"./index-BqUjqorV.js";import{L as oe}from"./index-C7ePc3Rn.js";import{P as ne}from"./index-DQYEQhQG.js";import{S as ae}from"./index-SBfgDntf.js";import{E as re}from"./index-BljZbolB.js";import{C as ie}from"./index-BtWSimco.js";import"./icon-B8Reo0P2.js";import"./index-DWHfpBzf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Yvpn3d-W.js";import"./helper-CJ_b_F_u.js";import"./useVModel-CsuQbcSh.js";import"./dep-d524834c-s9Vwwbzr.js";import"./dep-86139c71-C0IAGQhw.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./dep-af55fe23-B3wLF_kD.js";import"./dep-96cefb8b-B7fBVahI.js";import"./common-CF_MvV9u.js";import"./useLengthLimit-DKh2E-5w.js";import"./log-ZJhmUOBa.js";import"./useResizeObserver-Cdm0ScvH.js";import"./index-53D3hsao.js";import"./form-model-Ba97jzoW.js";import"./dep-4cc4ef27-CAGvppEF.js";import"./const-BpWshxEh.js";import"./close-circle-filled-VWO7_lX7.js";import"./index-PGf1iCVp.js";import"./index-DN1GPaNa.js";import"./useDefaultValue-Ddzubvc6.js";import"./index-c2cc7QiC.js";import"./observe-CfjnoQGd.js";import"./useReadonly-CXHqkGFp.js";import"./slot-cq2gaFzZ.js";import"./tree-store-Bu2E6EjC.js";import"./dep-eedf0c29-C1TTFeWr.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./useVirtualScrollNew-DRIC9GW6.js";import"./dep-02de0cb4-VTr6AM5L.js";import"./index-BD2FLwpo.js";import"./index-Dz3F8iWe.js";import"./index-DB8QFTGe.js";import"./browse-DwSqVlrQ.js";import"./useCommonClassName-DmyQvkIn.js";import"./index-wZPh1Y2_.js";import"./number-D5fGb371.js";import"./index-0JxUx2HH.js";import"./index-B_MhyprB.js";import"./index-DJdMn3qi.js";import"./index-Bwp-2Qz8.js";import"./chevron-left-DYfq66NB.js";import"./chevron-right-Cq7dXvRT.js";import"./dep-1858b432-QdwZEHj5.js";const se={class:"category-header c-flex"},me={class:"l"},ut=P({__name:"index",setup(pe){const y=d([]),N=(o,{type:n})=>o(n==="expand"?Y:Z),R=C(()=>N),u=d(null),l=d(!1);function w(){l.value=!l.value,A()}const A=async()=>{await q(),l.value?u.value.expandAll():u.value.foldAll()},_=d([]),h=async()=>{const o=await G({});o.code?_.value=o.data.list:b.error({content:o.msg,duration:0,closeBtn:!0})};h();const B=U({childrenKey:"children",treeNodeColumnIndex:0,indent:25,expandTreeNodeOnClick:!1}),g=d(),v=(o=0,n=0)=>{var m;(m=g.value)==null||m.init(o,n)},$=async o=>{const{msg:n}=await H({id:o});b.success(n),h()},E=z(),S=C(()=>({offsetTop:E.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(o,n)=>{const m=J,D=ee,p=te,x=oe,I=ne,V=ae,L=re,M=ie,c=F("perms");return a(),r(M,{title:"菜单管理",class:"basic-container",bordered:!1},{default:e(()=>[T("div",se,[T("div",me,[f((a(),r(m,{theme:"primary",onClick:n[0]||(n[0]=t=>v())},{default:e(()=>[i("添加")]),_:1})),[[c,["adminapi/permission/menu/add"]]]),s(m,{theme:"default",onClick:w},{default:e(()=>[i(K(l.value?"收起全部":"展开全部"),1)]),_:1})])]),s(L,{ref_key:"tableRef",ref:u,expandedTreeNodes:y.value,"onUpdate:expandedTreeNodes":n[1]||(n[1]=t=>y.value=t),"row-key":"id",data:_.value,columns:O(W),tree:B,hover:_.value.length>0,"max-height":"auto","table-layout":"auto","header-affixed-top":S.value,"tree-expand-and-fold-icon":R.value,"lazy-load":""},{icon:e(({row:t})=>[s(D,{name:t.icon},null,8,["name"])]),hidden:e(({row:t})=>[t.hidden==1?(a(),r(p,{key:0,theme:"danger",variant:"light"},{default:e(()=>[i("隐藏")]),_:1})):(a(),r(p,{key:1,theme:"success",variant:"light"},{default:e(()=>[i("显示")]),_:1}))]),type:e(({row:t})=>[t.type=="L"?(a(),r(p,{key:0,theme:"success",variant:"light"},{default:e(()=>[i("目录")]),_:1})):t.type=="M"?(a(),r(p,{key:1,theme:"primary",variant:"light"},{default:e(()=>[i("菜单")]),_:1})):t.type=="B"?(a(),r(p,{key:2,theme:"warning",variant:"light"},{default:e(()=>[i("按钮")]),_:1})):j("",!0)]),operate:e(({row:t})=>[s(V,null,{default:e(()=>[f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(0,t.id)},{default:e(()=>[i("添加")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/add"]]]),f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(t.id)},{default:e(()=>[i("编辑")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/edit"]]]),s(I,{content:"确认删除吗",onConfirm:k=>$(t.id)},{default:e(()=>[f((a(),r(x,{theme:"danger",hover:"color"},{default:e(()=>[i(" 删除 ")]),_:1})),[[c,["adminapi/permission/menu/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["expandedTreeNodes","data","columns","tree","hover","header-affixed-top","tree-expand-and-fold-icon"]),s(X,{ref_key:"editRef",ref:g,onSuccess:h},null,512)]),_:1})}}});export{ut as default};
