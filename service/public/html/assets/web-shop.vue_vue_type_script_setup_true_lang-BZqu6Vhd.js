import{g as $,e as G}from"./config-Cv3T-q4V.js";import{N as j,O as z,a as l,aX as D,d as L,E as J,G as X,I as W,J as q,av as Q,c1 as K,H as Y,C as Z,e as b,v as ee,aP as le,as as ae,aQ as ne,_ as te,aa as oe,c2 as re,W as se,L as ie,ad as ce,r as ue,j as S,o as de,p as fe,w as u,b as T,M as E,B as _e}from"./index-Bbii3Das.js";import{R as ve}from"./index-BdGTSLMf.js";import{F as me,a as pe}from"./index-DXOBqNco.js";import{T as ge}from"./index-DFKfGQQV.js";import{S as Ce}from"./index-DyMK9WKq.js";/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function he(){var d=D();return function(s,g){var f;if(j(d.props[s]))f=d.props[s](z);else if(d.slots[s])f=d.slots[s]&&d.slots[s](null)[0];else if(g){var i=g[d.props.theme];f=l(i,null,null)}return f}}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var be={close:{type:[String,Boolean,Function],default:!1},default:{type:[String,Function]},icon:{type:Function},maxLine:{type:Number,default:0},message:{type:[String,Function]},operation:{type:Function},theme:{type:String,default:"info",validator:function(e){return["success","info","warning","error"].includes(e)}},title:{type:[String,Function]},onClose:Function,onClosed:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var we=L({name:"TAlert",props:be,setup:function(e){var s=J("alert"),g=s.globalConfig,f=s.classPrefix,i=X({CheckCircleFilledIcon:W,CloseIcon:q,ErrorCircleFilledIcon:Q,HelpCircleFilledIcon:K,InfoCircleFilledIcon:Y}),k=i.CheckCircleFilledIcon,c=i.CloseIcon,t=i.ErrorCircleFilledIcon,F=i.HelpCircleFilledIcon,_=i.InfoCircleFilledIcon,o=Z("alert"),C=ie(),I=he(),v=b(null),m=b(null),w=b(0),y=b(!0),r=b(!0),M=function(){var a={info:_,success:k,warning:t,error:t,question:F},n=I("icon",a);return n?l("div",{class:"".concat(o.value,"__icon")},[n]):null},U=function(){var a=e.close,n=null;return a===!0||a===""?n=l(c,null,null):oe(a)?n=a:n=I("close"),n?l("div",{class:"".concat(o.value,"__close"),onClick:O},[n]):null},H=function(){var a=C("title");return a?l("div",{class:"".concat(o.value,"__title")},[" ",a]):null},P=function(){var a=C("operation");return l("div",{class:"".concat(o.value,"__message")},[A(),a?l("div",{class:"".concat(o.value,"__operation")},[a]):null])},A=function(){var a,n;n=C("default"),n||(n=C("message"));var h=se(n)?n.length:1,x=e.maxLine>0&&e.maxLine<h,N=(a=m.value)===null||a===void 0||(a=a.children[0])===null||a===void 0?void 0:a.offsetHeight;return x&&r.value?(n=n.slice(0,e.maxLine),N&&(m.value.style.height="".concat(w.value,"px"))):x&&N&&(m.value.style.height="".concat(N*(h-e.maxLine)+w.value,"px")),l("div",{class:"".concat(o.value,"__description"),ref:m},[x?n.map(function(R){return l("div",null,[R])}):n,x?l("div",{class:"".concat(o.value,"__collapse"),onClick:function(){r.value=!r.value}},[r.value?g.value.expandText:g.value.collapseText]):null])},B=function(){return l("div",{class:"".concat(o.value,"__content")},[H(),P()])},O=function(a){var n;(n=e.onClose)===null||n===void 0||n.call(e,{e:a}),re(v.value,"".concat(o.value,"--closing"))},V=function(a){var n=a.target===v.value;if(a.propertyName==="opacity"&&n){var h;y.value=!1,(h=e.onClosed)===null||h===void 0||h.call(e,{e:a})}};return ee(function(){le(v.value,"transitionend",V),w.value=m.value.offsetHeight}),ae(function(){ne(v.value,"transitionend",V)}),function(){return l("div",{ref:v,class:["".concat(o.value),"".concat(o.value,"--").concat(e.theme),te({},"".concat(f.value,"-is-hidden"),!y.value)]},[M(),B(),U()])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Fe=ce(we);const Ie={class:"basic-container",bordered:!1},ye={name:"WebAgreement"},Te=L({...ye,setup(d){const e=ue({shop_buy_protocol:"",show_purchase_agreement:1,goods_default_img:"",site_wordfilter_status:"",site_wordfilter_danger:""}),s=({name:c,url:t})=>{e[c]=t};(async()=>{const{data:c}=await $({field:Object.keys(e)});for(const t in c)e[t]=c[t]})();const f={},i=b(),k=async()=>{const c=await i.value.validate();if(typeof c!="object"&&c){const t=await G({data:e});t.code===1?E.success("操作成功"):E.error(t.msg)}};return(c,t)=>{const F=ve,_=me,o=S("wp-editor"),C=S("wp-upload"),I=Fe,v=ge,m=_e,w=Ce,y=pe;return de(),fe("div",Ie,[l(y,{ref_key:"formRef",ref:i,"label-align":"left",data:e,rules:f,"label-width":150,style:{"max-width":"900px"}},{default:u(()=>[l(_,{label:"是否弹出协议",name:"show_purchase_agreement",help:"用于自动弹出售卡协议，下单时需要先同意协议才能购买"},{default:u(()=>[l(F,{modelValue:e.show_purchase_agreement,"onUpdate:modelValue":t[0]||(t[0]=r=>e.show_purchase_agreement=r),options:[{label:"开启",value:1},{label:"关闭",value:0}]},null,8,["modelValue"])]),_:1}),l(_,{label:"购买协议",name:"shop_buy_protocol",tips:""},{default:u(()=>[l(o,{"model-value":e.shop_buy_protocol,"onUpdate:modelValue":t[1]||(t[1]=r=>e.shop_buy_protocol=r),"user-type":"admin",height:"300px",width:"100%",mode:"simple"},null,8,["model-value"])]),_:1}),l(_,{label:"商品缺省图",name:"goods_default_img",tips:"推荐宽高比1：1"},{default:u(()=>[l(C,{theme:"image",initial:e,name:"goods_default_img",app:"admin",data:{type:"image"},onUpdate:s},null,8,["initial"])]),_:1}),l(I,null,{default:u(()=>[T(" 违禁词受影响位置 ：商品分类名、商品名、商品描述、商品详情 ")]),_:1}),l(_,{label:"状态开关",name:"site_wordfilter_status",tips:"违禁词功能是否开启"},{default:u(()=>[l(F,{modelValue:e.site_wordfilter_status,"onUpdate:modelValue":t[2]||(t[2]=r=>e.site_wordfilter_status=r),options:[{label:"启用",value:1},{label:"关闭",value:0}]},null,8,["modelValue"])]),_:1}),l(_,{label:"违禁词",name:"site_wordfilter_danger"},{default:u(()=>[l(v,{modelValue:e.site_wordfilter_danger,"onUpdate:modelValue":t[3]||(t[3]=r=>e.site_wordfilter_danger=r),clearable:"",placeholder:"请输入要禁用的违禁词",tips:"使用“|”分隔",autosize:{minRows:5,maxRows:10}},null,8,["modelValue"])]),_:1}),l(_,null,{default:u(()=>[l(w,{size:"small"},{default:u(()=>[l(m,{theme:"primary",onClick:k,size:"large"},{default:u(()=>[T("提交")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])])}}});export{Te as _};
