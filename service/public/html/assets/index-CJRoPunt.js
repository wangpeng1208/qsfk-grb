import{d as j,l as m,au as N,av as X,aw as K,e as y,U as b,a5 as O,a9 as ae,v as re,aT as te,E as ne,N as ie,a as s,aa as L,Q as oe,ac as le,L as ce,a6 as ue,ad as ve}from"./index-Dys89YLq.js";import{o as se}from"./observe-CfjnoQGd.js";import{S as D}from"./index-DwGXmo2C.js";import{l as de}from"./log-ZJhmUOBa.js";function G(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,r)}return t}function k(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G(Object(t),!0).forEach(function(r){K(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}var fe={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v10h-2V4H4v9.59l5-5L14.41 14 13 15.41l-4-4-5 5V20h8v2H2V2zm13.55 5a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0zm3.62 6.76L19 17.59l2.83-2.83 1.41 1.41L20.41 19l2.83 2.83-1.41 1.41L19 20.41l-2.83 2.83-1.41-1.41L17.59 19l-2.83-2.83 1.41-1.41z"}}]},ge=j({name:"ImageErrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(a,e){var{attrs:t}=e,r=m(()=>a.size),{className:n,style:i}=N(r),c=m(()=>["t-icon","t-icon-image-error",n.value]),v=m(()=>k(k({},i.value),t.style)),d=m(()=>({class:c.value,style:v.value,onClick:o=>{var f;return(f=a.onClick)===null||f===void 0?void 0:f.call(a,{e:o})}}));return()=>X(fe,d.value)}});function R(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,r)}return t}function U(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R(Object(t),!0).forEach(function(r){K(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}var pe={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 18h13.59L9 11.41l-5 5V20zm16-.41V4H4v9.59l5-5 11 11zM15.55 7a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0z"}}]},me=j({name:"ImageIcon",props:{size:{type:String},onClick:{type:Function}},setup(a,e){var{attrs:t}=e,r=m(()=>a.size),{className:n,style:i}=N(r),c=m(()=>["t-icon","t-icon-image",n.value]),v=m(()=>U(U({},i.value),t.style)),d=m(()=>({class:c.value,style:v.value,onClick:o=>{var f;return(f=a.onClick)===null||f===void 0?void 0:f.call(a,{e:o})}}));return()=>X(pe,d.value)}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var ze=/(.png|.jpg|.jpeg|.jpe|.webp|.avif|.svg|.gif|.bmp)/i,ye=/(.png|.jpg|.jpeg|.jpe|.webp|.avif|.svg|.gif|.bmp|.dwg|.dxf|.svf|.tif|.tiff|.arw)/i,Fe=/(.pdf)/i,Be=/(.xlsx|.xls|.csv|.xlc|.xlm|.xlt|.xlw)/i,Ie=/(.dox|docx|.document|.wps|.wdb|.msword)/i,Ce=/(.ppt|.pptx|.key)/i,he=/(.avi|.mp4|.wmv|.mpg|.mpeg|.mov|.rm|.ram|.swf|.flv|.rmvb|.flash|.mid|.3gp)/i,we=/(.mp2|.mp3|.mp4|.ogg|.3gpp|.ac3|.au)/i,$={"audio/*":we,"video/*":he,"image/*":ye,".ico":/image\/vnd.microsoft.icon/i,".doc":/application\/msword/i,".docx":/application\/vnd.openxmlformats-officedocument.wordprocessingml.document/i,".xls":/application\/vnd.ms-excel/i,".xlsx":/application\/vnd.openxmlformats-officedocument.spreadsheetml.sheet/i,".ppt":/application\/vnd.ms-powerpoint/i,".pptx":/application\/vnd.openxmlformats-officedocument.presentationml.presentation/i,".vsd":/application\/vnd.visio/i,".txt":/text\/plain/i,".abw":/application\/x-abiword/i,".avi":/video\/x-msvideo/i,".azw":/application\/vnd.amazon.ebook/i,".bin":/application\/octet-stream/i,".cda":/application\/x-cdf/i,".mpkg":/application\/vnd.apple.installer+xml/i,".odp":/application\/vnd.oasis.opendocument.presentation/i,".ods":/application\/vnd.oasis.opendocument.spreadsheet/i,".odt":/application\/vnd.oasis.opendocument.text/i,".oga":/audio\/ogg/i,".ogv":/video\/ogg/i,".ogx":/application\/ogg/i},p={B:1,KB:1024,MB:1048576,GB:1073741824};function Me(a){return a<p.KB?"".concat(a," Bytes"):a>=p.KB&&a<p.MB?"".concat((a/p.KB).toFixed(1)," KB"):a>=p.MB&&a<p.GB?"".concat((a/p.MB).toFixed(1)," MB"):a>=p.GB?"".concat((a/p.GB).toFixed(1)," GB"):""}function Te(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=new Date,t=e.getMonth()+1;t=t<10?"0".concat(t):t;var r="".concat(e.getFullYear(),"-").concat(t,"-").concat(e.getDate()),n="".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds());return a?[r,n].join(" "):r}function De(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=a,n=0,i=0;if(!r)return"";for(var c=0;c<r.length;c++){var v=r[c],d=escape(v).indexOf("%u")===0;c<e*2&&n<e?d?n+=1:n+=2:c>c-t&&i<t&&(d?i+=1:i+=2)}return r.replace(new RegExp("^(.{".concat(n,"})(.+)(.{").concat(i,"})$")),"$1â€¦$3")}function Ge(a){return a<1024?"".concat(a," Bytes"):a>=1024&&a<1048576?"".concat((a/1024).toFixed(1)," KB"):a>=1048576?"".concat((a/1048576).toFixed(1)," MB"):""}function ke(a,e,t){var r=["B","KB","MB","GB"],n=1,i=r.indexOf(t);i===-1&&(de.warn("Upload","`sizeLimit.unit` can only be one of ".concat(r.join())),i=n);var c=p[t];return a>e*c}function _e(a){return new Promise(function(e){if(!a){e("");return}var t=new FileReader;t.readAsDataURL(a),t.onload=function(r){var n;e((n=r.target)===null||n===void 0?void 0:n.result)}})}function Oe(a,e,t){var r=e||t;if(!a)return!0;if(!r)return!1;for(var n=a.split(",").map(function(o){return o.trim()}),i=0,c=n.length;i<c;i++){var v=n[i];if($[v]&&$[v].test(r))return!0;var d=new RegExp(v,"i");if(d.test(r))return!0}return!1}function Re(a){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=[],r=0;r<a.length;r++)Oe(e,a[r].type,a[r].name)&&t.push(a[r]);return t}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function xe(a){var e=y("");return b([a],function(t,r){var n=O(t,1),i=n[0],c=O(r,1),v=c[0];if(v!==i){if(typeof i=="string"){e.value=i;return}_e(i).then(function(d){e.value=d})}},{immediate:!0}),{previewUrl:e}}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Ee={alt:{type:String,default:""},error:{type:[String,Function]},fallback:{type:String,default:""},fit:{type:String,default:"fill",validator:function(e){return e?["contain","cover","fill","none","scale-down"].includes(e):!0}},gallery:Boolean,lazy:Boolean,loading:{type:[String,Function]},overlayContent:{type:[String,Function]},overlayTrigger:{type:String,default:"always",validator:function(e){return e?["always","hover"].includes(e):!0}},placeholder:{type:[String,Function]},position:{type:String,default:"center"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin",validator:function(e){return e?["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(e):!0}},shape:{type:String,default:"square",validator:function(e){return e?["circle","round","square"].includes(e):!0}},src:{type:[String,Object]},srcset:{type:Object},onError:Function,onLoad:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Pe=j({name:"TImage",props:Ee,setup:function(e){var t=y(null),r=y(null),n=null,i=ae(e),c=i.src,v=ce();re(function(){var u;if((u=r.value)!==null&&u!==void 0&&u.complete&&!e.lazy&&H(),!(!e.lazy||!t.value)){var l=se(t.value,null,A,0);n=l}}),te(function(){t.value&&n&&n.unobserve(t.value)});var d=ne("image"),o=d.classPrefix,f=d.globalConfig,h=y(c.value);b([c,f],function(u){var l=O(u,2),g=l[0],S=l[1],ee=S||{},M=ee.replaceImageSrc,T=ie(M)?M(e):g;T===h.value&&h.value||(h.value=T)},{immediate:!0});var V=xe(h),z=V.previewUrl;b([z],function(){w.value=!1,x.value=!1});var _=y(!e.lazy),A=function(){_.value=!0},x=y(!1),F=function(l){var g;x.value=!0,(g=e.onLoad)===null||g===void 0||g.call(e,{e:l})},H=function(){var l=new Event("load");Object.defineProperty(l,"target",{value:r.value,enumerable:!0}),F(l)},w=y(!1),q=function(l){var g;w.value=!0,(g=e.onError)===null||g===void 0||g.call(e,{e:l}),e.fallback&&(h.value=e.fallback,w.value=!1)},E=m(function(){return e.overlayTrigger==="hover"}),J=m(function(){return["".concat(o.value,"-image"),"".concat(o.value,"-image--fit-").concat(e.fit),"".concat(o.value,"-image--position-").concat(e.position)]}),P=y(!E.value),B=function(){E.value&&(P.value=!P.value)},Q=function(){var l=v("placeholder");return l?s("div",{class:"".concat(o.value,"-image__placeholder")},[l]):null},W=function(){return e.gallery?s("div",{class:"".concat(o.value,"-image__gallery-shadow")},null):null},Y=function(){var l=C("overlayContent");return l?s("div",{class:["".concat(o.value,"-image__overlay-content"),!P.value&&"".concat(o.value,"-image__overlay-content--hidden")]},[l]):null};function Z(){return s("picture",null,[Object.entries(e.srcset).map(function(u){var l=O(u,2),g=l[0],S=l[1];return s("source",{type:g,srcset:S},null)}),I()])}function I(){var u=L(h.value)?h.value:z.value;return s("img",{ref:r,src:u,onError:q,onLoad:F,class:J.value,alt:e.alt,referrerpolicy:e.referrerpolicy},null)}var C=ue();return function(){return s("div",oe({ref:t,class:["".concat(o.value,"-image__wrapper"),"".concat(o.value,"-image__wrapper--shape-").concat(e.shape),e.gallery&&"".concat(o.value,"-image__wrapper--gallery"),E.value&&"".concat(o.value,"-image__wrapper--need-hover")],onMouseenter:B,onMouseleave:B},le(e,["src","alt","fit","position","shape","placeholder","loading","error","overlayTrigger","overlayContent","lazy","gallery","onLoad","onError"])),[Q(),W(),(w.value||!_.value)&&s("div",{class:"".concat(o.value,"-image")},null),!(w.value||!_.value)&&(e.srcset&&Object.keys(e.srcset).length?Z():I()),!(w.value||!_.value)&&!x.value&&s("div",{class:"".concat(o.value,"-image__loading")},[v("loading")||s(D,{direction:"vertical",size:8,align:"center"},{default:function(){return[s(me,{size:"24px"},null),L(e.loading)?e.loading:f.value.loadingText]}})]),w.value&&s("div",{class:"".concat(o.value,"-image__error")},[C("error",{defaultNode:s(D,{direction:"vertical",size:8,align:"center"},{default:function(){return[s(ge,{size:"24px"},null),L(e.error)?e.error:f.value.errorText]}})})]),Y()])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Ue=ve(Pe);export{Fe as F,Ue as I,he as V,De as a,Ge as b,ze as c,Be as d,Ie as e,Ce as f,Re as g,Te as h,ke as i,ge as j,me as k,Me as r,xe as u};
