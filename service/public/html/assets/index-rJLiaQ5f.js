import{d as P,e as d,l as C,r as U,k as z,f as F,o as a,c as r,w as e,g as T,h as f,b as i,a as s,t as K,u as O,n as j,T as q,b$ as G,M as b,c0 as H,B as J}from"./index-Bbii3Das.js";import{p as Q}from"./global-DaymibWd.js";import{c as W,_ as X}from"./edit.vue_vue_type_script_setup_true_lang-HdkW00j3.js";import Y from"./chevron-right-BbkA3iTT.js";import Z from"./chevron-down-DJI3WZ-V.js";import{I as ee}from"./index-LB7-EXu2.js";import{T as te}from"./index-CpsbnJvy.js";import{L as oe}from"./index-DccyryB8.js";import{P as ne}from"./index-VRvtQBdf.js";import{S as ae}from"./index-DyMK9WKq.js";import{E as re}from"./index-B7Cyio1B.js";import{C as ie}from"./index-tMpZz9fP.js";import"./icon-DNhNAyCh.js";import"./index-xCgMvBgb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BdGTSLMf.js";import"./helper-DuXnSC7u.js";import"./useVModel-mAS2bV03.js";import"./dep-d524834c-s9Vwwbzr.js";import"./dep-86139c71-Cql-Ebvf.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./dep-af55fe23-U_tvYUrP.js";import"./dep-96cefb8b-EGQiC2Rs.js";import"./common-CF_MvV9u.js";import"./useLengthLimit-Drp21OsL.js";import"./log-ZJhmUOBa.js";import"./useResizeObserver-C76GXHCj.js";import"./index-DXOBqNco.js";import"./form-model-9h0QNqcJ.js";import"./dep-4cc4ef27-CCky-4wQ.js";import"./const-DCUPODAK.js";import"./close-circle-filled-DvQn5h9G.js";import"./index-D2-a2ZeP.js";import"./index-OA6mVsn4.js";import"./useDefaultValue-BDK8TpyG.js";import"./index-m1SedByb.js";import"./observe-CfjnoQGd.js";import"./useReadonly-P1VyeMVt.js";import"./slot-Wx8ivmZH.js";import"./tree-store-BiQ5vlTd.js";import"./dep-eedf0c29-xQnwgY39.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./useVirtualScrollNew-JCNs8cdS.js";import"./dep-02de0cb4-DlXaPlFV.js";import"./index-D7A4xZ_W.js";import"./index-CpVXpLih.js";import"./index-CGpzlmyY.js";import"./browse-Cwmf87g2.js";import"./useCommonClassName-L0zFrjWC.js";import"./index-CknG8Rj8.js";import"./number-D-1MGlkC.js";import"./index-CzBgriim.js";import"./index-DV6htPKJ.js";import"./index-BL0Sakdl.js";import"./index-DBJlBd1d.js";import"./chevron-left-C_o2bTlZ.js";import"./chevron-right-7vJVdvaT.js";import"./dep-1858b432-DjAV0It-.js";const se={class:"category-header c-flex"},me={class:"l"},ut=P({__name:"index",setup(pe){const y=d([]),N=(o,{type:n})=>o(n==="expand"?Y:Z),R=C(()=>N),u=d(null),l=d(!1);function w(){l.value=!l.value,A()}const A=async()=>{await q(),l.value?u.value.expandAll():u.value.foldAll()},_=d([]),h=async()=>{const o=await G({});o.code?_.value=o.data.list:b.error({content:o.msg,duration:0,closeBtn:!0})};h();const B=U({childrenKey:"children",treeNodeColumnIndex:0,indent:25,expandTreeNodeOnClick:!1}),g=d(),v=(o=0,n=0)=>{var m;(m=g.value)==null||m.init(o,n)},$=async o=>{const{msg:n}=await H({id:o});b.success(n),h()},E=z(),S=C(()=>({offsetTop:E.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(o,n)=>{const m=J,D=ee,p=te,x=oe,I=ne,V=ae,L=re,M=ie,c=F("perms");return a(),r(M,{title:"菜单管理",class:"basic-container",bordered:!1},{default:e(()=>[T("div",se,[T("div",me,[f((a(),r(m,{theme:"primary",onClick:n[0]||(n[0]=t=>v())},{default:e(()=>[i("添加")]),_:1})),[[c,["adminapi/permission/menu/add"]]]),s(m,{theme:"default",onClick:w},{default:e(()=>[i(K(l.value?"收起全部":"展开全部"),1)]),_:1})])]),s(L,{ref_key:"tableRef",ref:u,expandedTreeNodes:y.value,"onUpdate:expandedTreeNodes":n[1]||(n[1]=t=>y.value=t),"row-key":"id",data:_.value,columns:O(W),tree:B,hover:_.value.length>0,"max-height":"auto","table-layout":"auto","header-affixed-top":S.value,"tree-expand-and-fold-icon":R.value,"lazy-load":""},{icon:e(({row:t})=>[s(D,{name:t.icon},null,8,["name"])]),hidden:e(({row:t})=>[t.hidden==1?(a(),r(p,{key:0,theme:"danger",variant:"light"},{default:e(()=>[i("隐藏")]),_:1})):(a(),r(p,{key:1,theme:"success",variant:"light"},{default:e(()=>[i("显示")]),_:1}))]),type:e(({row:t})=>[t.type=="L"?(a(),r(p,{key:0,theme:"success",variant:"light"},{default:e(()=>[i("目录")]),_:1})):t.type=="M"?(a(),r(p,{key:1,theme:"primary",variant:"light"},{default:e(()=>[i("菜单")]),_:1})):t.type=="B"?(a(),r(p,{key:2,theme:"warning",variant:"light"},{default:e(()=>[i("按钮")]),_:1})):j("",!0)]),operate:e(({row:t})=>[s(V,null,{default:e(()=>[f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(0,t.id)},{default:e(()=>[i("添加")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/add"]]]),f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(t.id)},{default:e(()=>[i("编辑")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/edit"]]]),s(I,{content:"确认删除吗",onConfirm:k=>$(t.id)},{default:e(()=>[f((a(),r(x,{theme:"danger",hover:"color"},{default:e(()=>[i(" 删除 ")]),_:1})),[[c,["adminapi/permission/menu/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["expandedTreeNodes","data","columns","tree","hover","header-affixed-top","tree-expand-and-fold-icon"]),s(X,{ref_key:"editRef",ref:g,onSuccess:h},null,512)]),_:1})}}});export{ut as default};
