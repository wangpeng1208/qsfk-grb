import{d as E,m as I,e as f,k as L,l as M,j as N,f as O,o as i,c as n,w as e,h as _,b as l,a as c,u as U,t as V,M as j,B as q}from"./index-Bbii3Das.js";import{l as F,d as G}from"./collection-CJNyyyLo.js";import{p as H,b as J}from"./pay_type-8C9HGVZO.js";import{p as Q}from"./global-DaymibWd.js";import W from"./edit-C3f72iqh.js";import{S as X}from"./index-DyMK9WKq.js";import{T as Y}from"./index-CpsbnJvy.js";import{L as Z}from"./index-DccyryB8.js";import{P as tt}from"./index-VRvtQBdf.js";import{B as et}from"./index-B7Cyio1B.js";import{C as at}from"./index-tMpZz9fP.js";import"./index-CGpzlmyY.js";import"./useLengthLimit-Drp21OsL.js";import"./log-ZJhmUOBa.js";import"./useReadonly-P1VyeMVt.js";import"./const-DCUPODAK.js";import"./useVModel-mAS2bV03.js";import"./useResizeObserver-C76GXHCj.js";import"./dep-d524834c-s9Vwwbzr.js";import"./browse-Cwmf87g2.js";import"./close-circle-filled-DvQn5h9G.js";import"./index-DXOBqNco.js";import"./dep-86139c71-Cql-Ebvf.js";import"./form-model-9h0QNqcJ.js";import"./dep-4cc4ef27-CCky-4wQ.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./index-DBJlBd1d.js";import"./dep-02de0cb4-DlXaPlFV.js";import"./dep-96cefb8b-EGQiC2Rs.js";import"./index-m1SedByb.js";import"./observe-CfjnoQGd.js";import"./common-CF_MvV9u.js";import"./slot-Wx8ivmZH.js";import"./index-D7A4xZ_W.js";import"./index-CpVXpLih.js";import"./useDefaultValue-BDK8TpyG.js";import"./index-DFKfGQQV.js";import"./helper-DuXnSC7u.js";import"./index-BdGTSLMf.js";import"./dep-af55fe23-U_tvYUrP.js";import"./index-CknG8Rj8.js";import"./useCommonClassName-L0zFrjWC.js";import"./number-D-1MGlkC.js";import"./index-xCgMvBgb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DV6htPKJ.js";import"./dep-eedf0c29-xQnwgY39.js";import"./index-BL0Sakdl.js";import"./chevron-left-C_o2bTlZ.js";import"./chevron-right-7vJVdvaT.js";import"./useVirtualScrollNew-JCNs8cdS.js";import"./dep-1858b432-DjAV0It-.js";const ot=[{colKey:"id",title:"ID"},{colKey:"title",title:"标题"},{colKey:"paytype",title:"分类"},{colKey:"code",title:"接口"},{colKey:"show_name",title:"名称"},{colKey:"status",title:"状态"},{colKey:"is_available",title:"平台"},{colKey:"sort",title:"排序"},{colKey:"operate",title:"操作",fixed:"right"}],oe=E({__name:"index",setup(it){const C=I(),x=(t=0)=>{C.push(`/admin/channel/collection/account?id=${t}`)},r=f({defaultPageSize:20,total:0,defaultCurrent:1}),y=f([]),u=async()=>{const{data:t}=await F({page:r.value.defaultCurrent,limit:r.value.defaultPageSize});y.value=t.list,r.value={defaultPageSize:t.limit,total:t.total,defaultCurrent:t.page},z()};u();const P=t=>{r.value.defaultCurrent=t.current,r.value.defaultPageSize=t.pageSize,u()},S=L(),T=M(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${Q}-layout`})),v=f(),g=(t=0)=>{v.value.init(t)},w=async t=>{(await G({id:t})).code===1&&(j.success("删除成功"),u())},p=f(),z=async()=>{const{data:t}=await H();t.forEach((o,s)=>{t[s].ico=J+o.ico}),p.value=t},K=t=>{if(!p.value)return"";const o=p.value.find(s=>s.value===t);return o?o.label:""},R=t=>{if(!p.value)return"";const o=p.value.find(s=>s.value===t);return o?o.ico:""};return(t,o)=>{const s=q,B=N("wp-image"),b=X,m=Y,h=Z,$=tt,D=et,A=at,d=O("perms");return i(),n(A,{title:"收款通道管理",class:"basic-container",bordered:!1,style:{"min-height":"calc(100vh - 160px)"}},{actions:e(()=>[_((i(),n(s,{theme:"primary",onClick:o[0]||(o[0]=a=>g())},{default:e(()=>[l("添加通道")]),_:1})),[[d,["adminapi/channel/collection/add"]]])]),default:e(()=>[c(D,{ref:"tableRef",class:"basic-table","row-key":"id",data:y.value,columns:U(ot),hover:y.value.length>0,"header-affixed-top":T.value,"max-height":"auto","table-layout":"auto",pagination:r.value,"lazy-load":"",onPageChange:P},{paytype:e(({row:a})=>[c(b,{align:"center"},{default:e(()=>[c(B,{src:R(a.paytype),style:{width:"30px",height:"30px"}},null,8,["src"]),l(" "+V(K(a.paytype)),1)]),_:2},1024)]),status:e(({row:a})=>[a.status===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("启用")]),_:1})):(i(),n(m,{key:1,variant:"light",theme:"danger"},{default:e(()=>[l("禁用")]),_:1}))]),is_available:e(({row:a})=>[a.is_available===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("手机")]),_:1})):a.is_available===2?(i(),n(m,{key:1,variant:"light",theme:"success"},{default:e(()=>[l("电脑")]),_:1})):(i(),n(m,{key:2,variant:"light",theme:"success"},{default:e(()=>[l("通用")]),_:1}))]),operate:e(({row:a})=>[c(b,null,{default:e(()=>[_((i(),n(h,{theme:"primary",size:"small",onClick:k=>g(a.id)},{default:e(()=>[l("编辑")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collection/edit"]]]),_((i(),n(h,{theme:"primary",size:"small",onClick:k=>x(a.id)},{default:e(()=>[l("账号管理")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collectionAccount/list"]]]),c($,{content:"确认删除吗",onConfirm:k=>w(a.id)},{default:e(()=>[_((i(),n(h,{theme:"danger",hover:"color",size:"small"},{default:e(()=>[l(" 删除 ")]),_:1})),[[d,["adminapi/channel/collection/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["data","columns","hover","header-affixed-top","pagination"]),c(W,{ref_key:"editRef",ref:v,"pay-type-options":p.value,onSuccess:u},null,8,["pay-type-options"])]),_:1})}}});export{oe as default};
