import{d as z,e as a,aj as A,ak as C,l as M,o as b,p as h,g as s,a as e,w as o,F as N,n as D,b as L,t as R,af as U,al as q,M as f,B as E,z as H,A as P,m as $}from"./index-CpJFga7x.js";import{I as j}from"./index-DUYa5w0Y.js";import{I as O}from"./index--0mKpQel.js";import{F as G,a as J}from"./index-jBP3p80B.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useLengthLimit-OjWIxDWr.js";import"./log-ZJhmUOBa.js";import"./useReadonly-Bx8TEnun.js";import"./const-BD0RkfTU.js";import"./useVModel-CzdLJ13E.js";import"./useResizeObserver-ONY0TviC.js";import"./dep-d524834c-s9Vwwbzr.js";import"./browse-CF75H87A.js";import"./close-circle-filled-1kZBSjap.js";import"./dep-86139c71-Dc2HrHYK.js";import"./form-model-ChnUeRwN.js";import"./dep-4cc4ef27-DQG4x64P.js";import"./dep-40320ba3-B1Ayvxeb.js";const Q=n=>(H("data-v-bf1a2dac"),n=n(),P(),n),W={class:"h-full"},X={class:"login-container mx-auto"},Y={class:"cp"},Z=Q(()=>s("div",{class:"title-container"},[s("div",{class:"title margin-no"}," 管理员登录 ")],-1)),ee={class:"copyright"},te=["innerHTML"],oe=z({__name:"index",setup(n){const m=a({url:""});(async()=>{const c=await q();m.value=c.data})();const v=$(),g=A();(()=>{g.accessToken&&(f.success("已登录, 正在跳转到工作台..."),v.push({path:"/admin/workbench"}))})();const y={username:"",password:""},I={username:[{required:!0,message:"用户名必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}]},k=a("password"),x=a(),r=a({...y}),l=a(!1),p=a("登 录"),i=a(!1),S=async c=>{if(c.validateResult===!0){p.value="登录中...",i.value=!0;try{await g.login(r.value),f.success("登陆成功"),v.push({path:"/admin/workbench"}),i.value=!1}catch(t){f.error(t.msg),i.value=!1,p.value="登录"}}},V=C(),B=M(()=>V.config.site_info_copyright);return(c,t)=>{const d=j,w=O,_=G,F=E,T=J;return b(),h("div",{class:"login-wrapper",style:U({background:m.value.url?`url(${m.value.url})  center repeat`:"none"})},[s("div",W,[s("div",X,[s("div",Y,[Z,e(T,{ref_key:"form",ref:x,class:"item-container",data:r.value,rules:I,"label-width":"0",onSubmit:S},{default:o(()=>[k.value=="password"?(b(),h(N,{key:0},[e(_,{name:"username"},{default:o(()=>[e(w,{modelValue:r.value.username,"onUpdate:modelValue":t[0]||(t[0]=u=>r.value.username=u),size:"large",placeholder:"请输入账号/手机号/邮箱"},{"prefix-icon":o(()=>[e(d,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(_,{name:"password"},{default:o(()=>[e(w,{modelValue:r.value.password,"onUpdate:modelValue":t[2]||(t[2]=u=>r.value.password=u),size:"large",type:l.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":o(()=>[e(d,{name:"lock-on"})]),"suffix-icon":o(()=>[e(d,{name:l.value?"browse":"browse-off",onClick:t[1]||(t[1]=u=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):D("",!0),e(_,{class:"btn-container"},{default:o(()=>[e(F,{block:"",type:"submit",size:"large",disabled:i.value},{default:o(()=>[L(R(p.value),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["data"])])])]),s("footer",ee,[s("span",{innerHTML:B.value},null,8,te)])],4)}}}),ke=K(oe,[["__scopeId","data-v-bf1a2dac"]]);export{ke as default};
