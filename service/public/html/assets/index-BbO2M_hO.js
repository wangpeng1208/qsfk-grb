import{d as E,m as I,e as f,k as L,l as M,j as N,f as O,o as i,c as n,w as e,h as _,b as l,a as c,u as U,t as V,M as j,B as q}from"./index-CpJFga7x.js";import{l as F,d as G}from"./collection-DaboJX6l.js";import{p as H,b as J}from"./pay_type-qjQt-0GT.js";import{p as Q}from"./global-DaymibWd.js";import W from"./edit-BN8dg7yA.js";import{S as X}from"./index-fiMfjcvP.js";import{T as Y}from"./index-BRf9TXQS.js";import{L as Z}from"./index-aNeCThFX.js";import{P as tt}from"./index-BJ0mh8x2.js";import{B as et}from"./index-DJO90WwP.js";import{C as at}from"./index-DJSz0Bsf.js";import"./index--0mKpQel.js";import"./useLengthLimit-OjWIxDWr.js";import"./log-ZJhmUOBa.js";import"./useReadonly-Bx8TEnun.js";import"./const-BD0RkfTU.js";import"./useVModel-CzdLJ13E.js";import"./useResizeObserver-ONY0TviC.js";import"./dep-d524834c-s9Vwwbzr.js";import"./browse-CF75H87A.js";import"./close-circle-filled-1kZBSjap.js";import"./index-jBP3p80B.js";import"./dep-86139c71-Dc2HrHYK.js";import"./form-model-ChnUeRwN.js";import"./dep-4cc4ef27-DQG4x64P.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./index-DePaE_yS.js";import"./dep-02de0cb4-9NqRuOAE.js";import"./dep-96cefb8b-hs2i3_dz.js";import"./index-Dk9r_Pa_.js";import"./observe-CfjnoQGd.js";import"./common-CF_MvV9u.js";import"./slot-DL8tHB3s.js";import"./index-DnrQMYJZ.js";import"./index-BcRf9bEE.js";import"./useDefaultValue-BJZ6w0Fl.js";import"./index-B-07KYJf.js";import"./helper-DkMMPY9i.js";import"./index-D7oq8DY2.js";import"./dep-af55fe23-3nGiADk5.js";import"./index-Dhx8Vlw0.js";import"./useCommonClassName-DGbYtLoH.js";import"./number--X5gY8kS.js";import"./index-AQEtrbEO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-byKPUDsR.js";import"./dep-eedf0c29-v-LgRmZs.js";import"./index-BqrdyjaG.js";import"./chevron-left-BX4tOZyG.js";import"./chevron-right-DSRNsGLo.js";import"./useVirtualScrollNew-XoyDLD8W.js";import"./dep-1858b432-D8vbiQ_j.js";const ot=[{colKey:"id",title:"ID"},{colKey:"title",title:"标题"},{colKey:"paytype",title:"分类"},{colKey:"code",title:"接口"},{colKey:"show_name",title:"名称"},{colKey:"status",title:"状态"},{colKey:"is_available",title:"平台"},{colKey:"sort",title:"排序"},{colKey:"operate",title:"操作",fixed:"right"}],oe=E({__name:"index",setup(it){const C=I(),x=(t=0)=>{C.push(`/admin/channel/collection/account?id=${t}`)},r=f({defaultPageSize:20,total:0,defaultCurrent:1}),y=f([]),u=async()=>{const{data:t}=await F({page:r.value.defaultCurrent,limit:r.value.defaultPageSize});y.value=t.list,r.value={defaultPageSize:t.limit,total:t.total,defaultCurrent:t.page},z()};u();const P=t=>{r.value.defaultCurrent=t.current,r.value.defaultPageSize=t.pageSize,u()},S=L(),T=M(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${Q}-layout`})),v=f(),g=(t=0)=>{v.value.init(t)},w=async t=>{(await G({id:t})).code===1&&(j.success("删除成功"),u())},p=f(),z=async()=>{const{data:t}=await H();t.forEach((o,s)=>{t[s].ico=J+o.ico}),p.value=t},K=t=>{if(!p.value)return"";const o=p.value.find(s=>s.value===t);return o?o.label:""},R=t=>{if(!p.value)return"";const o=p.value.find(s=>s.value===t);return o?o.ico:""};return(t,o)=>{const s=q,B=N("wp-image"),b=X,m=Y,h=Z,$=tt,D=et,A=at,d=O("perms");return i(),n(A,{title:"收款通道管理",class:"basic-container",bordered:!1,style:{"min-height":"calc(100vh - 160px)"}},{actions:e(()=>[_((i(),n(s,{theme:"primary",onClick:o[0]||(o[0]=a=>g())},{default:e(()=>[l("添加通道")]),_:1})),[[d,["adminapi/channel/collection/add"]]])]),default:e(()=>[c(D,{ref:"tableRef",class:"basic-table","row-key":"id",data:y.value,columns:U(ot),hover:y.value.length>0,"header-affixed-top":T.value,"max-height":"auto","table-layout":"auto",pagination:r.value,"lazy-load":"",onPageChange:P},{paytype:e(({row:a})=>[c(b,{align:"center"},{default:e(()=>[c(B,{src:R(a.paytype),style:{width:"30px",height:"30px"}},null,8,["src"]),l(" "+V(K(a.paytype)),1)]),_:2},1024)]),status:e(({row:a})=>[a.status===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("启用")]),_:1})):(i(),n(m,{key:1,variant:"light",theme:"danger"},{default:e(()=>[l("禁用")]),_:1}))]),is_available:e(({row:a})=>[a.is_available===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("手机")]),_:1})):a.is_available===2?(i(),n(m,{key:1,variant:"light",theme:"success"},{default:e(()=>[l("电脑")]),_:1})):(i(),n(m,{key:2,variant:"light",theme:"success"},{default:e(()=>[l("通用")]),_:1}))]),operate:e(({row:a})=>[c(b,null,{default:e(()=>[_((i(),n(h,{theme:"primary",size:"small",onClick:k=>g(a.id)},{default:e(()=>[l("编辑")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collection/edit"]]]),_((i(),n(h,{theme:"primary",size:"small",onClick:k=>x(a.id)},{default:e(()=>[l("账号管理")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collectionAccount/list"]]]),c($,{content:"确认删除吗",onConfirm:k=>w(a.id)},{default:e(()=>[_((i(),n(h,{theme:"danger",hover:"color",size:"small"},{default:e(()=>[l(" 删除 ")]),_:1})),[[d,["adminapi/channel/collection/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["data","columns","hover","header-affixed-top","pagination"]),c(W,{ref_key:"editRef",ref:v,"pay-type-options":p.value,onSuccess:u},null,8,["pay-type-options"])]),_:1})}}});export{oe as default};
