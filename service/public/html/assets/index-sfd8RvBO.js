import{l as N,a as V}from"./admin-YJlX9y3d.js";import{p as F}from"./global-DaymibWd.js";import{d as L,e as m,l as C,k as M,j,f as A,o as s,c as p,w as o,g as I,a as i,u as U,h as d,b as f,n as q,M as k,B as E}from"./index-Bl4AiOyE.js";import{_ as G}from"./edit.vue_vue_type_script_setup_true_lang-CsZPNI26.js";import{_ as H}from"./role.vue_vue_type_script_setup_true_lang-GF1AM-3i.js";import{_ as J}from"./search.vue_vue_type_script_setup_true_lang-CYji5cBJ.js";import{L as O}from"./index-DYrnlY5q.js";import{P as Q}from"./index-BHe90IKu.js";import{S as W}from"./index-CmSpUa39.js";import{B as X}from"./index-tzykTWLw.js";import{C as Y}from"./index-DgoDdsYb.js";import"./role-C0RGrh-L.js";import"./index.vue_vue_type_script_setup_true_lang-BOgC608s.js";import"./config-hc94wOqU.js";import"./index-Dkkg6vhj.js";import"./index-CeSPek2M.js";import"./observe-CfjnoQGd.js";import"./log-ZJhmUOBa.js";import"./close-circle-filled-xz65pYuL.js";import"./useCommonClassName-B8MbwXBA.js";import"./index-DKSVjsu7.js";import"./useDefaultValue-DgMKt5hR.js";import"./useVModel-HmF1Gebj.js";import"./dep-86139c71-_Dj3X0D4.js";import"./number-jGqlEXl8.js";import"./dep-d524834c-s9Vwwbzr.js";import"./index-BKyk21AZ.js";import"./index-BjJKviJA.js";import"./index-BACtxuGn.js";import"./dep-96cefb8b-D_Qrr7tD.js";import"./useResizeObserver-BUPtuDKJ.js";import"./chevron-left-BBFgH3SA.js";import"./browse-CCDZKZZU.js";import"./delete-BdbM_d1G.js";import"./dep-1858b432-B1ibg8Ju.js";import"./index-CLnbRl90.js";import"./useLengthLimit-zZTqNE_r.js";import"./useReadonly-DZtTxOfz.js";import"./const-BLdXWxIl.js";import"./index-DZCrjQ_3.js";import"./form-model-BN3AK5Zp.js";import"./dep-4cc4ef27-Bxo4BcuK.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./index-CCnSBKQl.js";import"./index-CkUJmLKO.js";import"./helper-VFi8r3PY.js";import"./dep-af55fe23-C5ZQDf4C.js";import"./common-CF_MvV9u.js";import"./index-DyWz2VZ8.js";import"./index-BuecJDAw.js";import"./slot-BjrDC6aI.js";import"./tree-store-D6Nt-HJf.js";import"./dep-eedf0c29-Hg3zrHFZ.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./useVirtualScrollNew-BJRfmUbB.js";import"./dep-02de0cb4-B9D_IUaB.js";import"./search-BfW0Hxie.js";import"./index-ChiVvrNs.js";import"./index-B8hTW5gB.js";import"./index-BXun50hP.js";import"./index-C23pHn_u.js";import"./index-BtiChZpX.js";import"./chevron-right-BZPeNPTA.js";const Z=[{colKey:"id",title:"ID"},{colKey:"username",title:"用户名"},{colKey:"avatar",title:"头像"},{colKey:"nickname",title:"昵称"},{colKey:"created_at",title:"创建时间"},{colKey:"role_name",title:"角色"},{colKey:"operate",title:"操作"}],ee={class:"c-flex"},ct=L({__name:"index",setup(te){const x=m(!1);C(()=>x.value?"收起搜索":"展开搜索");const r=m({defaultPageSize:20,total:0,defaultCurrent:1}),u=m([]),l=m(),n=async(t={})=>{l.value={...t};const{data:e}=await N({page:r.value.defaultCurrent,limit:r.value.defaultPageSize,...l.value});u.value=e.list,r.value.total=e.total};n();const b=t=>{r.value.defaultCurrent=t.current,r.value.defaultPageSize=t.pageSize,n(l.value)},S=M(),R=C(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${F}-layout`})),v=m(),h=(t=0)=>{var e;(e=v.value)==null||e.init(t)},g=m(),w=(t=0)=>{var e;(e=g.value)==null||e.init(t)},$=async t=>{const e=await V({id:t});e.code===1?(k.success("删除成功"),n(l.value)):k.error(e.msg)};return(t,e)=>{const B=E,K=j("wp-image"),_=O,P=Q,z=W,D=X,T=Y,c=A("perms");return s(),p(T,{title:"管理员管理",class:"basic-container",bordered:!1},{default:o(()=>[I("div",ee,[i(J,{ref:"searchFormRef",onSuccess:n},null,512)]),i(D,{class:"basic-table",ref:"tableRef","row-key":"id",data:u.value,columns:U(Z),hover:u.value.length>0,"header-affixed-top":R.value,pagination:r.value,"lazy-load":"","table-layout":"auto","max-height":"auto",onPageChange:b},{topContent:o(()=>[d((s(),p(B,{style:{margin:"15px 0"},theme:"primary",onClick:e[0]||(e[0]=a=>h())},{default:o(()=>[f("添加")]),_:1})),[[c,["adminapi/permission/admin/add"]]])]),avatar:o(({row:a})=>[i(K,{src:a.avatar,style:{width:"60px",height:"60px"},shape:"circle"},null,8,["src"])]),operate:o(({row:a})=>[i(z,null,{default:o(()=>[d((s(),p(_,{theme:"primary",hover:"color",onClick:y=>h(a.id)},{default:o(()=>[f("编辑")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/admin/edit"]]]),a.id!=1?d((s(),p(_,{key:0,theme:"primary",hover:"color",onClick:y=>w(a.id)},{default:o(()=>[f("分配角色")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/admin/setRoles"]]]):q("",!0),i(P,{content:"确认删除吗",onConfirm:y=>$(a.id)},{default:o(()=>[d((s(),p(_,{theme:"danger",hover:"color"},{default:o(()=>[f(" 删除 ")]),_:1})),[[c,["adminapi/permission/admin/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["data","columns","hover","header-affixed-top","pagination"]),i(G,{ref_key:"editRef",ref:v,onSuccess:n},null,512),i(H,{ref_key:"roleRef",ref:g,onSuccess:n},null,512)]),_:1})}}});export{ct as default};
