import{d as H,e as x,a0 as ee,C as $,_ as j,a as f,L as Q,P as ne,r as te,G as re,v as le,N as oe,O as ie,l as U,W as D,aa as ae,bd as B,aX as ue,X as ce,ac as R,F as de,Q as A,ad as V}from"./index-CpJFga7x.js";import{p as X}from"./helper-DkMMPY9i.js";import{P as ve}from"./index-BcRf9bEE.js";import{D as J}from"./index-DLxi--Yj.js";import{c as se}from"./chevron-right-DSRNsGLo.js";import{u as fe}from"./slot-DL8tHB3s.js";/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var pe={active:Boolean,content:{type:[String,Function],default:""},disabled:Boolean,divider:Boolean,prefixIcon:{type:Function},theme:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},value:{type:[String,Number,Object]},onClick:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function K(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,t)}return n}function G(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K(Object(n),!0).forEach(function(t){j(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var F=H({name:"TDropdownItem",props:G(G({},pe),{},{maxColumnWidth:{type:[String,Number],default:100},minColumnWidth:{type:[String,Number],default:10},isSubmenu:Boolean}),setup:function(e){var n=Q(),t=ne(),i=x();ee(e.isSubmenu?null:i);var p=n("prefixIcon"),m=$("dropdown__item"),O=function(g){var w;e.disabled||(w=e.onClick)===null||w===void 0||w.call(e,e.value,{e:g})};return function(){var u=t("default","content"),g=[m.value,"".concat(m.value,"--theme-").concat(e.theme),j(j({},"".concat(m.value,"--active"),e.active),"".concat(m.value,"--disabled"),e.disabled)];return f("li",{class:g,onClick:O,style:{maxWidth:X(e.maxColumnWidth),minWidth:X(e.minColumnWidth)},ref:i},[e.prefixIcon?f("div",{class:"".concat(m.value,"-icon")},[p]):null,u])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Y={direction:{type:String,default:"right",validator:function(e){return e?["left","right"].includes(e):!0}},disabled:Boolean,hideAfterItemClick:{type:Boolean,default:!0},maxColumnWidth:{type:[String,Number],default:100},maxHeight:{type:Number,default:300},minColumnWidth:{type:[String,Number],default:10},options:{type:Array,default:function(){return[]}},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placement:{type:String,default:"bottom-left",validator:function(e){return e?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(e):!0}},popupProps:{type:Object},trigger:{type:String,default:"hover",validator:function(e){return e?["hover","click","focus","context-menu"].includes(e):!0}},onClick:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function q(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,t)}return n}function z(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q(Object(n),!0).forEach(function(t){j(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var Z=H({name:"TDropdownMenu",props:z({},Y),setup:function(e){var n=$("dropdown"),t=$("dropdown__menu"),i=te({}),p=x(null),m=x(),O=x(!1),u=re({ChevronRightIcon:se}),g=u.ChevronRightIcon,w=function(l){var a,v,b=l.data,P=l.context;b==null||(a=b.onClick)===null||a===void 0||a.call(b,b,P),(v=e.onClick)===null||v===void 0||v.call(e,b,P)},h=function(l,a){var v=l.target.scrollTop;i[a]=v};le(function(){if(m.value){var c,l=parseInt((c=window)===null||c===void 0?void 0:c.getComputedStyle(m.value).height,10);l>=e.maxHeight&&(O.value=!0)}p.value=document.querySelector(".".concat(n.value,"__item")).scrollHeight+2});var s=function(l){return oe(l)?l(ie):l},d=function(l,a){var v,b=[],P;return(v=l.forEach)===null||v===void 0||v.call(l,function(k,C){var o=z({},k),S=C-Math.ceil(i[a]/p.value),W=S>=0?S:C;o.children?(o.children=d(o.children,a+1),P=f("div",{key:C},[f(F,{style:o.style,class:["".concat(n.value,"__item"),"".concat(n.value,"__item--suffix"),o.class],value:o.value,theme:o.theme,active:o.active,prefixIcon:o.prefixIcon,disabled:o.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,isSubmenu:!0},{default:function(){return[f("div",{class:"".concat(n.value,"__item-content")},[f("span",{class:"".concat(n.value,"__item-text")},[s(o.content)]),f(g,{class:"".concat(n.value,"__item-direction"),size:"16"},null)]),f("div",{class:["".concat(n.value,"__submenu-wrapper"),j({},"".concat(n.value,"__submenu-wrapper--").concat(e.direction),e.direction)],style:{position:"absolute",top:"".concat(W*p.value,"px")}},[f("div",{class:["".concat(n.value,"__submenu"),j({},"".concat(n.value,"__submenu--disabled"),o.disabled)],style:{position:"static",maxHeight:"".concat(e.maxHeight,"px")},onScroll:function(I){return h(I,a+1)}},[f("ul",null,[o.children])])])]}}),o.divider?f(J,null,null):null])):P=f("div",{key:C},[f(F,{style:o.style,class:["".concat(n.value,"__item"),o.class],value:o.value,theme:o.theme,active:o.active,prefixIcon:o.prefixIcon,disabled:o.disabled,minColumnWidth:e.minColumnWidth,maxColumnWidth:e.maxColumnWidth,onClick:o.disabled||o.children?function(){return null}:function(_,y){return w({data:o,context:y})}},{default:function(){return[f("span",{class:"".concat(n.value,"__item-text")},[s(o.content)])]}}),o.divider?f(J,null,null):null]),b.push(P)}),b};return function(){return f("div",{class:[t.value,"".concat(t.value,"--").concat(e.direction),j({},"".concat(t.value,"--overflow"),O.value)],style:{maxHeight:"".concat(e.maxHeight,"px")},ref:m,onScroll:function(l){return h(l,0)}},[d(e.options,0)])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function L(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,t)}return n}function M(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L(Object(n),!0).forEach(function(t){j(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var T=function(e){var n,t,i;if(!e)return[];if(((n=e[0])===null||n===void 0||(n=n.type)===null||n===void 0?void 0:n.name)==="TDropdownMenu"){var p,m,O=(p=e[0])===null||p===void 0||(p=p.children)===null||p===void 0||(m=p.default)===null||m===void 0?void 0:m.call(p);if(D(O))return T(O)}return D(e)?(e=e.reduce(function(u,g){return u=u.concat(D(g.children)?g.children:g),u},[]),e.map(function(u){var g,w,h,s,d,c,l,a,v,b,P=(g=u.children)===null||g===void 0||(w=g.content)===null||w===void 0?void 0:w.call(g),k=((h=u.children)===null||h===void 0||(s=h.prefixIcon)===null||s===void 0?void 0:s.call(h))||((d=u.children)===null||d===void 0||(c=d["prefix-icon"])===null||c===void 0?void 0:c.call(d)),C=(l=u.children)===null||l===void 0||(a=l.default)===null||a===void 0?void 0:a.call(l),o=C==null||(v=C.filter)===null||v===void 0?void 0:v.call(C,function(_){var y;return!["TDropdownMenu","TDropdownItem"].includes((y=_.type)===null||y===void 0?void 0:y.name)}),S=C==null||(b=C.filter)===null||b===void 0?void 0:b.call(C,function(_){var y;return!ae(_.children)&&["TDropdownMenu","TDropdownItem"].includes((y=_.type)===null||y===void 0?void 0:y.name)}),W=Object.keys(u.props||{}).reduce(function(_,y){var I;return u.props[y]===""&&((I=u.type)===null||I===void 0?void 0:I.name)==="TDropdownItem"&&["active","divider","disabled"].includes(y)?_[B(y)]=!0:_[B(y)]=u.props[y],_},{});return M(M(M({content:P||o||C},W),k?{prefixIcon:function(){return k}}:{}),{},{children:(S==null?void 0:S.length)>0?T(S):null})}).filter(function(u){return!!u.content})):D((t=e[0])===null||t===void 0?void 0:t.children)?T((i=e[0])===null||i===void 0?void 0:i.children):[]};function me(r){var e,n,t,i,p=fe(),m=ue(),O=((e=p("DropdownMenu"))===null||e===void 0||(e=e[0])===null||e===void 0||(e=e.children)===null||e===void 0||(n=e.default)===null||n===void 0?void 0:n.call(e))||((t=m.slots)===null||t===void 0||(i=t.dropdown)===null||i===void 0?void 0:i.call(t)),u=U(function(){return r.options&&r.options.length>0?r.options:T(O)});return u}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function N(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,t)}return n}function E(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N(Object(n),!0).forEach(function(t){j(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var he=H({name:"TDropdown",props:Y,setup:function(e,n){var t=n.attrs,i=Q(),p=$("dropdown"),m=x(null),O=x(!1),u=U(function(){var h,s,d=(h=e.popupProps)===null||h===void 0?void 0:h.delay;return ce(d)?d+10:D(d)?((s=d[1])!==null&&s!==void 0?s:d[0])+10:160}),g=function(s,d){var c;if(e.hideAfterItemClick){var l,a,v,b;setTimeout(function(){return O.value=!1},u.value),(l=e.popupProps)===null||l===void 0||(a=l.onVisibleChange)===null||a===void 0||a.call(l,!1,d),(v=e.popupProps)===null||v===void 0||(b=v["on-visible-change"])===null||b===void 0||b.call(v,!1,d)}e==null||(c=e.onClick)===null||c===void 0||c.call(e,s,d)},w=function(s,d){var c,l,a,v;O.value=s,(c=e.popupProps)===null||c===void 0||(l=c.onVisibleChange)===null||l===void 0||l.call(c,s,d),(a=e.popupProps)===null||a===void 0||(v=a["on-visible-change"])===null||v===void 0||v.call(a,s,d)};return function(){var h,s,d=(h=i("default"))===null||h===void 0?void 0:h[0],c=me(e),l=E(E(E({},t),{},{disabled:e.disabled,placement:e.placement,trigger:e.trigger},R(e.popupProps,["onVisibleChange","on-visible-change"])),{},{overlayInnerClassName:[p.value,(s=e.popupProps)===null||s===void 0?void 0:s.overlayInnerClassName]});return f(ve,A({destroyOnClose:!0,ref:m,visible:O.value,onVisibleChange:w,expandAnimation:!0},l),{default:function(){return[d]},content:function(){return f(de,null,[i("panelTopContent"),f(Z,A(R(e,"onClick"),{options:c.value,onClick:g}),null),i("panelBottomContent")])}})}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var we=V(he),je=V(F),Pe=V(Z);export{we as D,je as a,Pe as b};
