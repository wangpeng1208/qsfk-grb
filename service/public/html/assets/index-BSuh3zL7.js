import{b as K,c as P}from"./role-C0RGrh-L.js";import{p as T}from"./global-DaymibWd.js";import{d as N,e as m,k as V,l as L,j as M,f as j,o as r,c as s,w as o,g as C,h as p,b as c,a as d,u as A,n as I,M as U,B as q}from"./index-Bl4AiOyE.js";import{_ as E}from"./edit.vue_vue_type_script_setup_true_lang-CsCGfAZh.js";import{_ as F}from"./rule.vue_vue_type_script_setup_true_lang-CQlf_SNi.js";import{L as G}from"./index-DYrnlY5q.js";import{S as H}from"./index-CmSpUa39.js";import{B as J}from"./index-tzykTWLw.js";import{C as O}from"./index-DgoDdsYb.js";import"./index-uPwIzCpa.js";import"./dep-86139c71-_Dj3X0D4.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./index-DyWz2VZ8.js";import"./useVModel-HmF1Gebj.js";import"./useDefaultValue-DgMKt5hR.js";import"./dep-af55fe23-C5ZQDf4C.js";import"./dep-96cefb8b-D_Qrr7tD.js";import"./index-BuecJDAw.js";import"./observe-CfjnoQGd.js";import"./common-CF_MvV9u.js";import"./useReadonly-DZtTxOfz.js";import"./dep-d524834c-s9Vwwbzr.js";import"./slot-BjrDC6aI.js";import"./tree-store-D6Nt-HJf.js";import"./dep-eedf0c29-Hg3zrHFZ.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./log-ZJhmUOBa.js";import"./useVirtualScrollNew-BJRfmUbB.js";import"./useResizeObserver-BUPtuDKJ.js";import"./dep-02de0cb4-B9D_IUaB.js";import"./dep-4cc4ef27-Bxo4BcuK.js";import"./index-BXun50hP.js";import"./index-BACtxuGn.js";import"./useLengthLimit-zZTqNE_r.js";import"./index-CLnbRl90.js";import"./const-BLdXWxIl.js";import"./browse-CCDZKZZU.js";import"./close-circle-filled-xz65pYuL.js";import"./index-C23pHn_u.js";import"./index-DZCrjQ_3.js";import"./form-model-BN3AK5Zp.js";import"./index-BKyk21AZ.js";import"./index-BXPKF7iO.js";import"./index-BjJKviJA.js";import"./index-BtiChZpX.js";import"./index-CCnSBKQl.js";import"./useCommonClassName-B8MbwXBA.js";import"./number-jGqlEXl8.js";import"./index-B8hTW5gB.js";import"./chevron-left-BBFgH3SA.js";import"./chevron-right-BZPeNPTA.js";import"./index-CkUJmLKO.js";import"./helper-VFi8r3PY.js";import"./dep-1858b432-B1ibg8Ju.js";const Q=[{colKey:"id",title:"ID"},{colKey:"name",title:"名称"},{colKey:"created_at",title:"创建时间"},{colKey:"updated_at",title:"修改时间"},{colKey:"operate",title:"操作"}],W={class:"category-header c-flex"},X={class:"l"},Ze=N({__name:"index",setup(Y){const i=m({defaultPageSize:20,total:0,defaultCurrent:1}),u=m([]),_=m(),n=async(e={})=>{_.value=e;const{data:t}=await K({page:i.value.defaultCurrent,limit:i.value.defaultPageSize,...e});u.value=t.list,i.value.total=t.total};n();const k=e=>{i.value.defaultCurrent=e.current,i.value.defaultPageSize=e.pageSize,n(_)},b=V(),x=L(()=>({offsetTop:b.isUseTabsRouter?48:0,container:`.${T}-layout`})),v=m(),h=(e=0)=>{var t;(t=v.value)==null||t.init(e)},g=m(),S=(e=0)=>{var t;(t=g.value)==null||t.init(e,!0)},w=async e=>{(await P({id:e})).code===1&&(U.success("删除成功"),n())};return(e,t)=>{const R=q,B=M("wp-image"),f=G,$=H,z=J,D=O,l=j("perms");return r(),s(D,{title:"管理员角色管理",class:"basic-container",bordered:!1},{default:o(()=>[C("div",W,[C("div",X,[p((r(),s(R,{theme:"primary",onClick:t[0]||(t[0]=a=>h())},{default:o(()=>[c("添加")]),_:1})),[[l,["adminapi/permission/role/add"]]])])]),d(z,{class:"basic-table",ref:"tableRef","row-key":"id",data:u.value,columns:A(Q),hover:u.value.length>0,"header-affixed-top":x.value,pagination:i.value,"lazy-load":"","table-layout":"auto","max-height":"100%",onPageChange:k},{avatar:o(({row:a})=>[d(B,{src:a.avatar,style:{width:"60px",height:"60px"}},null,8,["src"])]),operate:o(({row:a})=>[a.id!=1?(r(),s($,{key:0},{default:o(()=>[p((r(),s(f,{theme:"primary",hover:"color",onClick:y=>h(a.id)},{default:o(()=>[c("编辑")]),_:2},1032,["onClick"])),[[l,["adminapi/permission/role/edit"]]]),p((r(),s(f,{theme:"primary",hover:"color",onClick:y=>S(a.id)},{default:o(()=>[c("分配权限")]),_:2},1032,["onClick"])),[[l,["adminapi/permission/role/rule"]]]),p((r(),s(f,{theme:"danger",hover:"color",onClick:y=>w(a.id)},{default:o(()=>[c("删除")]),_:2},1032,["onClick"])),[[l,["adminapi/permission/role/del"]]])]),_:2},1024)):I("",!0)]),_:1},8,["data","columns","hover","header-affixed-top","pagination"]),d(E,{ref_key:"editRef",ref:v,onSuccess:n},null,512),d(F,{ref_key:"ruleRef",ref:g,onSuccess:n},null,512)]),_:1})}}});export{Ze as default};
