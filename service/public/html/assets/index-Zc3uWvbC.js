import{e as y,l as m,_ as b,d as Q,E as q,G as Y,C as Z,bP as ee,U as p,bD as ne,bm as ae,v as te,bT as le,as as oe,a as d,Q as re,bj as ie,J as ue,L as ce,P as ve,T as de,bR as se,ad as me}from"./index-Bbii3Das.js";/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var fe={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function]},closeBtn:{type:[String,Boolean,Function]},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function]},default:{type:[String,Function]},destroyOnClose:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"overlay",validator:function(e){return e?["overlay","push"].includes(e):!0}},placement:{type:String,default:"right",validator:function(e){return e?["left","right","top","bottom"].includes(e):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},size:{type:String,default:void 0},sizeDraggable:{type:[Boolean,Object],default:!1},visible:Boolean,zIndex:{type:Number},onCancel:Function,onClose:Function,onCloseBtnClick:Function,onConfirm:Function,onEscKeydown:Function,onOverlayClick:Function,onSizeDragEnd:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function ge(u,e){return typeof u=="boolean"?{allowSizeDraggable:u,max:e.max,min:e.min}:{allowSizeDraggable:!0,max:u.max,min:u.min}}function T(u,e,c){return Math.min(Math.max(u,e),c)}function he(u,e){var c=e.x,v=e.y,r=e.max,i=e.min,f=e.maxWidth,x=e.maxHeight,l;switch(u){case"right":l=T(f-c,i,r);break;case"left":l=T(c,i,r);break;case"top":l=T(v,i,r);break;case"bottom":l=T(x-v,i,r);break;default:return l}return l}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var ye=function(e){var c=y(!1),v=y(null),r=function(){document.addEventListener("mouseup",i,!0),document.addEventListener("mousemove",f,!0),c.value=!0},i=function(){document.removeEventListener("mouseup",i,!0),document.removeEventListener("mousemove",f,!0),c.value=!1},f=function(g){var S,_=g.x,F=g.y,o=document.documentElement.clientHeight,C=document.documentElement.clientWidth,E=8,M=8,A=e.placement==="left"||e.placement==="right"?C:o,D=e.placement==="left"||e.placement==="right"?M:E,B=ge(e.sizeDraggable,{max:A,min:D}),N=B.allowSizeDraggable,O=B.max,I=B.min;if(!(!N||!c.value)){var z=he(e.placement,{x:_,y:F,maxWidth:C,maxHeight:o,max:O,min:I});typeof z>"u"||(v.value="".concat(z,"px"),(S=e.onSizeDragEnd)===null||S===void 0||S.call(e,{e:g,size:z}))}},x=m(function(){var l=["right","left"].includes(e.placement),g={left:"right",right:"left",top:"bottom",bottom:"top"};return b(b(b(b({zIndex:1,position:"absolute",background:"transparent"},g[e.placement],0),"width",l?"16px":"100%"),"height",l?"100%":"16px"),"cursor",l?"col-resize":"row-resize")});return{draggedSizeValue:v,enableDrag:r,draggableLineStyles:x}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var be=1,Ce=Q({name:"TDrawer",inheritAttrs:!1,props:fe,emits:["update:visible"],setup:function(e,c){var v=y(!1),r=y(!1),i=y(),f=y(),x=q("drawer"),l=x.globalConfig,g=Y({CloseIcon:ue}),S=g.CloseIcon,_=ce(),F=ve(),o=Z("drawer"),C=ye(e),E=C.draggedSizeValue,M=C.enableDrag,A=C.draggableLineStyles,D=ee(function(){return e.attach}),B=function(n){var a;(a=e.onConfirm)===null||a===void 0||a.call(e,{e:n})},N=function(n){var a;(a=e.onCancel)===null||a===void 0||a.call(e,{e:n}),k({trigger:"cancel",e:n})},O=se({confirmBtnAction:B,cancelBtnAction:N}),I=O.getConfirmBtn,z=O.getCancelBtn,L=y(null),H=m(function(){return[o.value,"".concat(o.value,"--").concat(e.placement),b(b(b({},"".concat(o.value,"--open"),r.value),"".concat(o.value,"--attach"),e.showInAttachedElement),"".concat(o.value,"--without-mask"),!e.showOverlay)]}),w=m(function(){var t;if(E.value)return E.value;var n=(t=e.size)!==null&&t!==void 0?t:l.value.size,a=isNaN(Number(n))?n:"".concat(n,"px");return{small:"300px",medium:"500px",large:"760px"}[n]||a}),W=m(function(){return{transform:r.value?"translateX(0)":void 0,width:["left","right"].includes(e.placement)?w.value:"",height:["top","bottom"].includes(e.placement)?w.value:""}}),V=m(function(){return["".concat(o.value,"__content-wrapper"),"".concat(o.value,"__content-wrapper--").concat(e.placement)]}),h=m(function(){return L.value&&L.value.parentNode}),K=m(function(){return[e.mode,e.placement].join()}),j=m(function(){return{display:"flex",justifyContent:e.placement==="right"?"flex-start":"flex-end"}}),P=function(n){var a;if(((a=e.closeOnEscKeydown)!==null&&a!==void 0?a:l.value.closeOnEscKeydown)&&n.key==="Escape"&&r.value){var s;(s=e.onEscKeydown)===null||s===void 0||s.call(e,{e:n}),k({trigger:"esc",e:n})}},$=function(){clearTimeout(f.value),f.value=setTimeout(function(){var n,a;(n=i.value)===null||n===void 0||(n=n.parentNode)===null||n===void 0||(a=n.removeChild)===null||a===void 0||a.call(n,i.value)},150)},G=function(){e.mode==="push"&&de(function(){h.value&&(h.value.style.cssText="transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;")})},J=function(){if(h.value&&!(e.mode!=="push"||!h.value)){var n={left:"margin: 0 0 0 ".concat(w.value),right:"margin: 0 0 0 -".concat(w.value),top:"margin: ".concat(w.value," 0 0 0"),bottom:"margin: -".concat(w.value," 0 0 0")}[e.placement];r.value?h.value.style.cssText+=n:h.value.style.cssText=h.value.style.cssText.replace(/margin:.+;/,"")}},U=function(){var n=I({confirmBtn:e.confirmBtn,globalConfirm:l.value.confirm,className:"".concat(o.value,"__confirm")}),a=z({cancelBtn:e.cancelBtn,globalCancel:l.value.cancel,className:"".concat(o.value,"__cancel")});return d("div",{style:j.value},[e.placement==="right"?n:null,a,e.placement!=="right"?n:null])};p(K,function(){G()},{immediate:!0}),p(function(){return e.visible},function(t){ne||(t?!e.showInAttachedElement&&e.preventScrollThrough&&i.value&&document.head.appendChild(i.value):$(),e.destroyOnClose?t?(v.value=!1,setTimeout(function(){r.value=!0})):(r.value=!1,setTimeout(function(){v.value=!0},200)):v.value===!0&&t?(v.value=!1,setTimeout(function(){r.value=!0})):r.value=t)},{immediate:!0});var X=function(n){var a;(a=e.onCloseBtnClick)===null||a===void 0||a.call(e,{e:n}),k({trigger:"close-btn",e:n})},R=function(n){var a,s;(a=e.onOverlayClick)===null||a===void 0||a.call(e,{e:n}),((s=e.closeOnOverlayClick)!==null&&s!==void 0?s:l.value.closeOnOverlayClick)&&k({trigger:"overlay",e:n})},k=function(n){var a;(a=e.onClose)===null||a===void 0||a.call(e,n),c.emit("update:visible",!1)};return ae(function(){J()}),te(function(){var t=document.documentElement.scrollHeight>document.documentElement.clientHeight,n=t?le():0;i.value=document.createElement("style"),i.value.dataset.id="td_drawer_".concat(+new Date,"_").concat(be+=1),i.value.innerHTML=`
        html body {
          overflow-y: hidden;
          transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
          `.concat(e.mode==="push"?"":"width: calc(100% - ".concat(n,"px);"),`
        }
      `),r.value&&!e.showInAttachedElement&&e.preventScrollThrough&&document.head.appendChild(i.value),window.addEventListener("keydown",P)}),oe(function(){$(),window.removeEventListener("keydown",P)}),function(){if(!v.value){var t=F("body","default"),n=_("header"),a=U();return d(ie,{disabled:!e.attach||!D.value,to:D.value},{default:function(){return[d("div",re({ref:L,class:H.value,style:{zIndex:e.zIndex},onKeydown:P,tabindex:0},c.attrs),[e.showOverlay&&d("div",{class:"".concat(o.value,"__mask"),onClick:R},null),d("div",{class:V.value,style:W.value},[n&&d("div",{class:"".concat(o.value,"__header")},[n]),e.closeBtn&&d("div",{class:"".concat(o.value,"__close-btn"),onClick:X},[_("closeBtn",d(S,null,null))]),d("div",{class:["".concat(o.value,"__body"),"narrow-scrollbar"]},[t]),e.footer&&d("div",{class:"".concat(o.value,"__footer")},[_("footer",a)]),e.sizeDraggable&&d("div",{style:A.value,onMousedown:M},null)])])]}})}}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var xe=me(Ce);export{xe as D};
