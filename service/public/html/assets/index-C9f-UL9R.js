import{d as E,m as I,e as f,k as L,l as M,j as N,f as O,o as i,c as n,w as e,h as _,b as l,a as p,u as U,t as V,M as j,B as q}from"./index-Dys89YLq.js";import{l as F,d as G}from"./collection-B99RMpFG.js";import{p as H,b as J}from"./pay_type-QXaXWpIW.js";import{p as Q}from"./global-DaymibWd.js";import W from"./edit-WgNyY9pZ.js";import{S as X}from"./index-DwGXmo2C.js";import{T as Y}from"./index-BcNem8rV.js";import{L as Z}from"./index-C8u_RSpS.js";import{P as tt}from"./index-BV872pH_.js";import{B as et}from"./index-DbnGGVSd.js";import{C as at}from"./index-D8Ix0oeU.js";import"./index-k_yBcVp0.js";import"./useReadonly-GuO_-cT8.js";import"./useVModel-ChUVkX5D.js";import"./log-ZJhmUOBa.js";import"./useResizeObserver-D_uTF440.js";import"./dep-d524834c-s9Vwwbzr.js";import"./close-circle-filled-6NKz9kYY.js";import"./index-BYoZ1jRX.js";import"./dep-86139c71-BioGcMu7.js";import"./form-model-CIY_RhMw.js";import"./dep-4cc4ef27--AW_KZeX.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./index-Ci-WgI1t.js";import"./dep-02de0cb4-_xWusXWA.js";import"./dep-96cefb8b-CiB99TH1.js";import"./index-BTVA41u8.js";import"./observe-CfjnoQGd.js";import"./common-CF_MvV9u.js";import"./slot-DKAjzcwC.js";import"./index-BA1slVbh.js";import"./index-CjM8dnKg.js";import"./useDefaultValue-pk1y0m3m.js";import"./index-CQi5G9rp.js";import"./helper-DDcUnKCP.js";import"./index-Q2T2ZnL7.js";import"./dep-af55fe23-hzblXEZ8.js";import"./index-xCa1PnD5.js";import"./useCommonClassName-BZA0SnO7.js";import"./number-B3LVzGws.js";import"./index-9wlLuihG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BT8Ia4HF.js";import"./dep-eedf0c29-ErImML_u.js";import"./index-Dka09D2p.js";import"./chevron-left-Ca8qIpvl.js";import"./chevron-right-Bz__VYX8.js";import"./useVirtualScrollNew-B7BxRQci.js";import"./dep-1858b432-DPK9DfHI.js";const ot=[{colKey:"id",title:"ID"},{colKey:"title",title:"标题"},{colKey:"paytype",title:"分类"},{colKey:"code",title:"接口"},{colKey:"show_name",title:"名称"},{colKey:"status",title:"状态"},{colKey:"is_available",title:"平台"},{colKey:"sort",title:"排序"},{colKey:"operate",title:"操作",fixed:"right"}],te=E({__name:"index",setup(it){const C=I(),x=(t=0)=>{C.push(`/admin/channel/collection/account?id=${t}`)},r=f({defaultPageSize:20,total:0,defaultCurrent:1}),y=f([]),u=async()=>{const{data:t}=await F({page:r.value.defaultCurrent,limit:r.value.defaultPageSize});y.value=t.list,r.value={defaultPageSize:t.limit,total:t.total,defaultCurrent:t.page},z()};u();const P=t=>{r.value.defaultCurrent=t.current,r.value.defaultPageSize=t.pageSize,u()},S=L(),T=M(()=>({offsetTop:S.isUseTabsRouter?48:0,container:`.${Q}-layout`})),v=f(),g=(t=0)=>{v.value.init(t)},w=async t=>{(await G({id:t})).code===1&&(j.success("删除成功"),u())},c=f(),z=async()=>{const{data:t}=await H();t.forEach((o,s)=>{t[s].ico=J+o.ico}),c.value=t},K=t=>{if(!c.value)return"";const o=c.value.find(s=>s.value===t);return o?o.label:""},R=t=>{if(!c.value)return"";const o=c.value.find(s=>s.value===t);return o?o.ico:""};return(t,o)=>{const s=q,B=N("wp-image"),b=X,m=Y,h=Z,$=tt,D=et,A=at,d=O("perms");return i(),n(A,{title:"收款通道管理",class:"basic-container",bordered:!1,style:{"min-height":"calc(100vh - 160px)"}},{actions:e(()=>[_((i(),n(s,{theme:"primary",onClick:o[0]||(o[0]=a=>g())},{default:e(()=>[l("添加通道")]),_:1})),[[d,["adminapi/channel/collection/add"]]])]),default:e(()=>[p(D,{ref:"tableRef",class:"basic-table","row-key":"id",data:y.value,columns:U(ot),hover:y.value.length>0,"header-affixed-top":T.value,"max-height":"auto","table-layout":"auto",pagination:r.value,"lazy-load":"",onPageChange:P},{paytype:e(({row:a})=>[p(b,{align:"center"},{default:e(()=>[p(B,{src:R(a.paytype),style:{width:"30px",height:"30px"}},null,8,["src"]),l(" "+V(K(a.paytype)),1)]),_:2},1024)]),status:e(({row:a})=>[a.status===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("启用")]),_:1})):(i(),n(m,{key:1,variant:"light",theme:"danger"},{default:e(()=>[l("禁用")]),_:1}))]),is_available:e(({row:a})=>[a.is_available===1?(i(),n(m,{key:0,variant:"light",theme:"success"},{default:e(()=>[l("手机")]),_:1})):a.is_available===2?(i(),n(m,{key:1,variant:"light",theme:"success"},{default:e(()=>[l("电脑")]),_:1})):(i(),n(m,{key:2,variant:"light",theme:"success"},{default:e(()=>[l("通用")]),_:1}))]),operate:e(({row:a})=>[p(b,null,{default:e(()=>[_((i(),n(h,{theme:"primary",size:"small",onClick:k=>g(a.id)},{default:e(()=>[l("编辑")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collection/edit"]]]),_((i(),n(h,{theme:"primary",size:"small",onClick:k=>x(a.id)},{default:e(()=>[l("账号管理")]),_:2},1032,["onClick"])),[[d,["adminapi/channel/collectionAccount/list"]]]),p($,{content:"确认删除吗",onConfirm:k=>w(a.id)},{default:e(()=>[_((i(),n(h,{theme:"danger",hover:"color",size:"small"},{default:e(()=>[l(" 删除 ")]),_:1})),[[d,["adminapi/channel/collection/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["data","columns","hover","header-affixed-top","pagination"]),p(W,{ref_key:"editRef",ref:v,"pay-type-options":c.value,onSuccess:u},null,8,["pay-type-options"])]),_:1})}}});export{te as default};
