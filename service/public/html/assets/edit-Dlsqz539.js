import{c as A,a as N,e as P,b as L}from"./collection-BWMblGRL.js";import{d as j,e as r,r as G,s as z,o as _,c as w,w as s,a,p as H,F as J,q as K,g as m,t as Q,M as f}from"./index-DyfhlEKp.js";import{I as W}from"./index-DB8QFTGe.js";import{F as X,a as Y}from"./index-53D3hsao.js";import{S as Z,O as $}from"./index-Bwp-2Qz8.js";import{T as ee}from"./index-Lelr9JQ7.js";import{R as oe}from"./index-Yvpn3d-W.js";import{I as te}from"./index-wZPh1Y2_.js";import{D as ae}from"./index-DWHfpBzf.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useLengthLimit-DKh2E-5w.js";import"./log-ZJhmUOBa.js";import"./useReadonly-CXHqkGFp.js";import"./const-BpWshxEh.js";import"./useVModel-CsuQbcSh.js";import"./useResizeObserver-Cdm0ScvH.js";import"./dep-d524834c-s9Vwwbzr.js";import"./browse-DwSqVlrQ.js";import"./close-circle-filled-VWO7_lX7.js";import"./dep-86139c71-C0IAGQhw.js";import"./form-model-Ba97jzoW.js";import"./dep-4cc4ef27-CAGvppEF.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./dep-02de0cb4-VTr6AM5L.js";import"./dep-96cefb8b-B7fBVahI.js";import"./index-c2cc7QiC.js";import"./observe-CfjnoQGd.js";import"./common-CF_MvV9u.js";import"./slot-cq2gaFzZ.js";import"./index-BD2FLwpo.js";import"./index-Dz3F8iWe.js";import"./useDefaultValue-Ddzubvc6.js";import"./index-BqUjqorV.js";import"./helper-CJ_b_F_u.js";import"./dep-af55fe23-B3wLF_kD.js";import"./useCommonClassName-DmyQvkIn.js";import"./number-D5fGb371.js";const se={class:"tdesign-demo__user-option"},ne=["src"],ie={class:"tdesign-demo__user-option-info"},re={name:"AdminMenuEditPopup"},pe=j({...re,props:{payTypeOptions:{}},emits:["success"],setup(U,{expose:T,emit:k}){const d=r();(async()=>{const{data:l}=await A({});d.value=l})();const x=l=>{var e;o.account_fields=(e=d.value.find(n=>n.value===l))==null?void 0:e.fields},O=[{label:"启用",value:1},{label:"禁用",value:0}],h=[{label:"手机",value:1},{label:"电脑",value:2},{label:"通用",value:0}],u={id:0,title:"",code:"",show_name:"",account_fields:"",status:1,is_available:1,sort:0,type:1,paytype:"",codeType:"collection"},o=G({...u}),b=U,v=r(b.payTypeOptions);z(()=>{v.value=b.payTypeOptions});const y=r(),p=r(!1),c=r("添加收款渠道"),C=l=>{if(l)c.value="编辑收款渠道",D(l);else{c.value="添加收款渠道";for(const e in u)o[e]=u[e]}p.value=!0},D=async l=>{const{data:e}=await N({id:l});for(const n in o)e[n]!=null&&e[n]!==void 0&&(o[n]=e[n])};T({init:C});const F={title:[{required:!0,message:"必填",type:"error"}],code:[{required:!0,message:"接口代码必选",type:"error"}],paytype:[{required:!0,message:"分类必选，此处图标会显示在购卡页面",type:"error"}]},I=k,R=async()=>{const l=await y.value.validate();if(typeof l!="object"&&l)try{let e;o.id>0?e=await P(o):e=await L(o),e.code===1?(f.success("操作成功"),p.value=!1,I("success")):f.error(e.msg)}catch(e){f.error(e.msg)}};return(l,e)=>{const n=W,i=X,V=Z,E=ee,S=$,g=oe,q=te,B=Y,M=ae;return _(),w(M,{visible:p.value,"onUpdate:visible":e[8]||(e[8]=t=>p.value=t),"close-on-overlay-click":!1,"destroy-on-close":!0,header:c.value,"on-confirm":R},{default:s(()=>[a(B,{ref_key:"formRef",ref:y,"label-align":"left",data:o,rules:F,"label-width":80},{default:s(()=>[a(i,{label:"接口名称",name:"title"},{default:s(()=>[a(n,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=t=>o.title=t),clearable:"",placeholder:"请输入接口名称"},null,8,["modelValue"])]),_:1}),a(i,{label:"代码接口",name:"code"},{default:s(()=>[a(V,{modelValue:o.code,"onUpdate:modelValue":e[1]||(e[1]=t=>o.code=t),options:d.value,clearable:"",placeholder:"请选择支付代码接口",onChange:x},null,8,["modelValue","options"])]),_:1}),a(i,{label:"显示名称",name:"show_name",tips:"用于店铺售卡页支付方式名显示"},{default:s(()=>[a(n,{modelValue:o.show_name,"onUpdate:modelValue":e[2]||(e[2]=t=>o.show_name=t),clearable:"",placeholder:"显示名称"},null,8,["modelValue"])]),_:1}),a(i,{label:"账户字段",name:"account_fields",tips:"含证书字符的将自动识别为证书上传框"},{default:s(()=>[a(E,{modelValue:o.account_fields,"onUpdate:modelValue":e[3]||(e[3]=t=>o.account_fields=t),clearable:"",placeholder:"用户添加渠道账户所需的字段，用“|”分割字段,用:分隔名称，如：应用号:appid|应用秘钥:appsecret"},null,8,["modelValue"])]),_:1}),a(i,{label:"分类",name:"paytype"},{default:s(()=>[a(V,{modelValue:o.paytype,"onUpdate:modelValue":e[4]||(e[4]=t=>o.paytype=t),clearable:"",placeholder:"请选择分类"},{default:s(()=>[(_(!0),H(J,null,K(v.value,t=>(_(),w(S,{key:t.value,value:t.value,label:t.label},{default:s(()=>[m("div",se,[m("img",{src:t.ico,style:{width:"16px"}},null,8,ne),m("div",ie,[m("div",null,Q(t.label),1)])])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"状态",name:"status"},{default:s(()=>[a(g,{modelValue:o.status,"onUpdate:modelValue":e[5]||(e[5]=t=>o.status=t),options:O},null,8,["modelValue"])]),_:1}),a(i,{label:"适用终端",name:"is_available"},{default:s(()=>[a(g,{modelValue:o.is_available,"onUpdate:modelValue":e[6]||(e[6]=t=>o.is_available=t),options:h},null,8,["modelValue"])]),_:1}),a(i,{label:"排序",name:"sort",help:"排序(越大越靠前)"},{default:s(()=>[a(q,{modelValue:o.sort,"onUpdate:modelValue":e[7]||(e[7]=t=>o.sort=t),theme:"normal",min:0,clearable:"",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}}),Qe=le(pe,[["__scopeId","data-v-019e215b"]]);export{Qe as default};
