import{d as P,l as s,au as J,av as G,aw as q,e as S,U as se,_ as V,a9 as $e,C as L,E as Re,v as Xe,a as o,L as ve,W as Ye,aa as Ke,a5 as be,bM as We,bN as Je,T as Ge,F as ie,bg as qe,bm as Qe,h as et,ai as tt,J as rt,ad as nt}from"./index-Dys89YLq.js";import{u as at}from"./useDefaultValue-pk1y0m3m.js";import{u as ot}from"./useVModel-ChUVkX5D.js";import{u as ce,j as lt,k as it,I as ut}from"./index-CJRoPunt.js";import{_ as ye,r as ae}from"./dep-86139c71-BioGcMu7.js";import{p as ct,j as st,l as vt,c as mt}from"./number-B3LVzGws.js";import{D as dt}from"./index-9wlLuihG.js";import{T as ue}from"./index-BT8Ia4HF.js";import{c as ft}from"./chevron-left-Ca8qIpvl.js";function Oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function he(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oe(Object(t),!0).forEach(function(n){q(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var gt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 3v9.59l3.5-3.5 1.41 1.41L12 16.41 6.09 10.5 7.5 9.09l3.5 3.5V3h2zM4.5 14v5h15v-5h2v7h-19v-7h2z"}}]},pt=P({name:"DownloadIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,e){var{attrs:t}=e,n=s(()=>r.size),{className:a,style:l}=J(n),m=s(()=>["t-icon","t-icon-download",a.value]),c=s(()=>he(he({},l.value),t.style)),i=s(()=>({class:m.value,style:c.value,onClick:d=>{var v;return(v=r.onClick)===null||v===void 0?void 0:v.call(r,{e:d})}}));return()=>G(gt,i.value)}});function _e(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Se(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_e(Object(t),!0).forEach(function(n){q(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var wt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 2v20h-2V2h2zM9 4.64V18.5H1.3L9 4.64zm6 0l7.7 13.86H15V4.64zM4.7 16.5H7v-4.14L4.7 16.5zM17 12.36v4.14h2.3L17 12.36z"}}]},bt=P({name:"MirrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,e){var{attrs:t}=e,n=s(()=>r.size),{className:a,style:l}=J(n),m=s(()=>["t-icon","t-icon-mirror",a.value]),c=s(()=>Se(Se({},l.value),t.style)),i=s(()=>({class:m.value,style:c.value,onClick:d=>{var v;return(v=r.onClick)===null||v===void 0?void 0:v.call(r,{e:d})}}));return()=>G(wt,i.value)}});function je(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ie(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?je(Object(t),!0).forEach(function(n){q(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):je(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var yt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 2v9a9 9 0 019 9h9v2H2V2h2zm0 18h7a7 7 0 00-7-7v7z"}}]},Ot=P({name:"RotationIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,e){var{attrs:t}=e,n=s(()=>r.size),{className:a,style:l}=J(n),m=s(()=>["t-icon","t-icon-rotation",a.value]),c=s(()=>Ie(Ie({},l.value),t.style)),i=s(()=>({class:m.value,style:c.value,onClick:d=>{var v;return(v=r.onClick)===null||v===void 0?void 0:v.call(r,{e:d})}}));return()=>G(yt,i.value)}});function Pe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Ce(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pe(Object(t),!0).forEach(function(n){q(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ht={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM11.5 6.5v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2z"}}]},_t=P({name:"ZoomInIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,e){var{attrs:t}=e,n=s(()=>r.size),{className:a,style:l}=J(n),m=s(()=>["t-icon","t-icon-zoom-in",a.value]),c=s(()=>Ce(Ce({},l.value),t.style)),i=s(()=>({class:m.value,style:c.value,onClick:d=>{var v;return(v=r.onClick)===null||v===void 0?void 0:v.call(r,{e:d})}}));return()=>G(ht,i.value)}});function xe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xe(Object(t),!0).forEach(function(n){q(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var St={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM6.5 11.5v-2h8v2h-8z"}}]},jt=P({name:"ZoomOutIcon",props:{size:{type:String},onClick:{type:Function}},setup(r,e){var{attrs:t}=e,n=s(()=>r.size),{className:a,style:l}=J(n),m=s(()=>["t-icon","t-icon-zoom-out",a.value]),c=s(()=>ke(ke({},l.value),t.style)),i=s(()=>({class:m.value,style:c.value,onClick:d=>{var v;return(v=r.onClick)===null||v===void 0?void 0:v.call(r,{e:d})}}));return()=>G(St,i.value)}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Me(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function It(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Me(Object(t),!0).forEach(function(n){V(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Pt(r){var e=S(r),t=function(l){var m=l.pageX,c=l.pageY,i=e.value,d=i.translateX,v=i.translateY,g=function(_){var z=_.pageX,E=_.pageY;e.value={translateX:d+z-m,translateY:v+E-c}},j=function(){document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",j)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",j)},n=function(){e.value=It({},r)};return{transform:e,mouseDownHandler:t,resetTransform:n}}function Ct(){var r=S(1),e=function(){r.value*=-1},t=function(){r.value=1};return{mirror:r,onMirror:e,resetMirror:t}}function xt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{max:2,min:.5,step:.5},e=r.max,t=r.min,n=r.step,a=r.defaultScale,l=S(a??1),m=function(){var g=ct(l.value,n);d(g)},c=function(){var g=st(l.value,n);d(g)},i=function(){l.value=a??1},d=function(g){var j=g;g<t&&(j=t),g>e&&(j=e),l.value=j};return se(function(){return r},function(){return i()}),{scale:l,onZoomIn:m,onZoomOut:c,resetScale:i}}function kt(){var r=S(0),e=90,t=function(){r.value+=e},n=function(){r.value=0};return{rotate:r,onRotate:t,resetRotate:n}}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Be=P({name:"TImageItem",props:{rotate:Number,scale:Number,mirror:Number,src:[String,Object],placementSrc:[String,Object],isSvg:Boolean},setup:function(e){var t=$e(e),n=t.src,a=t.placementSrc,l=t.isSvg,m=L(),c=S(!1),i=S(!1),d=Pt({translateX:0,translateY:0}),v=d.transform,g=d.mouseDownHandler,j=Re("imageViewer"),F=j.globalConfig,_=F.value.errorText,z=S(),E=s(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:!e.placementSrc||i.value?"block":"none"}}),Q=s(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:i.value?"none":"block"}}),D=s(function(){var w=v.value,p=w.translateX,y=w.translateY;return{transform:"translate(".concat(p,"px, ").concat(y,"px) scale(").concat(e.mirror,", 1)")}}),ee=function(){c.value=!1,i.value=!1,l.value&&N(C.value)},N=function(){var w=ye(ae.mark(function p(y){var H,R,re,x,Z,O,I,X,B,Y,K,k,$;return ae.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,fetch(y);case 2:if(R=h.sent,R.ok){h.next=6;break}throw c.value=!0,new Error("Failed to fetch SVG: ".concat(R.statusText));case 6:return h.next=8,R.text();case 8:re=h.sent,x=z.value,x.innerHTML="",(H=x.classList)===null||H===void 0||H.add("".concat(m.value,"-image-viewer__modal-image-svg")),Z=x.attachShadow({mode:"closed"}),O=document.createElement("div"),O.style.background="transparent",O.innerHTML=re,Z.appendChild(O),I=O.querySelector("svg"),I&&(X=I.getAttribute("viewBox"),X?(B=X.split(/[\s\,]/).filter(function(le){return le}).map(parseFloat),Y=B[2],K=B[3],O.style.width="".concat(Y,"px"),O.style.height="".concat(K,"px")):(k=I.getBBox(),$="".concat(k.x," ").concat(k.y," ").concat(k.width," ").concat(k.height),I.setAttribute("viewBox",$),O.style.width="".concat(k.width,"px"),O.style.height="".concat(k.height,"px"))),i.value=!0;case 20:case"end":return h.stop()}},p)}));return function(y){return w.apply(this,arguments)}}(),te=ce(n),C=te.previewUrl,oe=ce(a),U=oe.previewUrl;return se([C,U],function(){ee()}),Xe(ye(ae.mark(function w(){return ae.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!l.value){y.next=3;break}return y.next=3,N(C.value);case 3:case"end":return y.stop()}},w)}))),function(){return o("div",{class:"".concat(m.value,"-image-viewer__modal-pic")},[o("div",{class:"".concat(m.value,"-image-viewer__modal-box"),style:D.value},[c.value&&o("div",{class:"".concat(m.value,"-image-viewer__img-error")},[o("div",{class:"".concat(m.value,"-image-viewer__img-error-content")},[o(lt,{size:"4em"},null),o("div",{class:"".concat(m.value,"-image-viewer__img-error-text")},[_])])]),!c.value&&!!e.placementSrc&&U.value&&o("img",{class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(p){p.stopPropagation(),g(p)},src:U.value,style:Q.value,alt:"image",draggable:"false"},null),!c.value&&C.value&&!l.value&&o("img",{class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(p){p.stopPropagation(),g(p)},src:C.value,onLoad:function(){return i.value=!0},onError:function(){return c.value=!0},style:E.value,alt:"image",draggable:"false"},null),!c.value&&C.value&&l.value&&o("div",{ref:z,class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(p){p.stopPropagation(),g(p)},"data-alt":"svg",style:E.value,draggable:"false"},null)])])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var M=P({name:"TImageModalIcon",props:{disabled:Boolean,onClick:Function,label:String,icon:Function},setup:function(e){var t=L(),n=ve(),a=s(function(){return["".concat(t.value,"-image-viewer__modal-icon"),V({},"".concat(t.value,"-is-disabled"),e.disabled)]});return function(){return o("div",{class:a.value,onClick:e.onClick},[n("icon"),e.label&&o("span",{class:"".concat(t.value,"-image-viewer__modal-icon-label")},[e.label])])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var W={attach:{type:[String,Function],default:"body"},closeBtn:{type:[Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:!0},closeOnOverlay:Boolean,draggable:{type:Boolean,default:void 0},imageScale:{type:Object},images:{type:Array,default:function(){return[]}},index:{type:Number,default:void 0},defaultIndex:{type:Number,default:0},mode:{type:String,default:"modal",validator:function(e){return e?["modal","modeless"].includes(e):!0}},navigationArrow:{type:[Boolean,Function],default:!0},showOverlay:{type:Boolean,default:void 0},title:{type:[String,Function]},trigger:{type:[String,Function]},viewerScale:{type:Object},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onClose:Function,onIndexChange:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function ze(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Mt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ze(Object(t),!0).forEach(function(n){V(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var zt=function(e){var t,n,a,l=new Image,m=(e==null||(t=e.split)===null||t===void 0||(t=t.call(e,"?"))===null||t===void 0||(t=t[0])===null||t===void 0||(n=t.split)===null||n===void 0||(n=n.call(t,"#"))===null||n===void 0||(n=n[0])===null||n===void 0||(a=n.split)===null||a===void 0?void 0:a.call(n,"/").pop())||Math.random().toString(32).slice(2);l.setAttribute("crossOrigin","anonymous"),l.onload=function(){var c=document.createElement("canvas");c.width=l.width,c.height=l.height;var i=c.getContext("2d");i.drawImage(l,0,0,l.width,l.height),c.toBlob(function(d){var v=URL.createObjectURL(d),g=document.createElement("a");g.download=m,g.href=v,g.click(),g.remove(),URL.revokeObjectURL(v)})},l.src=e},Dt=function(e){return!!e&&!Ke(e)&&!(e instanceof File)},$t=function(e){return Ye(e)?e.map(function(t){return Dt(t)?Mt({download:!0,thumbnail:t.mainImage},t):{mainImage:t,thumbnail:t,download:!0}}):[]},Rt=function(e){return e.showOverlay!==void 0?e.showOverlay:e.mode==="modal"};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Te=P({name:"TImageViewerUtils",props:{scale:Number,onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,currentImage:{type:Object,default:function(){return{}}}},setup:function(e){var t=L(),n=s(function(){return e.currentImage.mainImage}),a=ce(n),l=a.previewUrl,m=Re("imageViewer"),c=m.globalConfig;return function(){return o("div",{class:"".concat(t.value,"-image-viewer__utils")},[o("div",{class:"".concat(t.value,"-image-viewer__utils-content")},[o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:c.value.mirrorTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o(M,{onClick:e.onMirror,icon:function(){return o(bt,{size:"medium"},null)}},null)]}}),o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:c.value.rotateTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o(M,{onClick:e.onRotate,icon:function(){return o(Ot,{size:"medium"},null)}},null)]}}),o(M,{icon:function(){return o(jt,{size:"medium"},null)},onClick:e.onZoomOut},null),o(M,{class:"".concat(t.value,"-image-viewer__utils-scale"),size:"medium",label:"".concat(vt(String(e.scale*100)),"%")},null),o(M,{icon:function(){return o(_t,{size:"medium"},null)},onClick:e.onZoomIn},null),o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:c.value.originalSizeTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o("div",{class:"".concat(t.value,"-image-viewer__modal-icon")},[o(M,{icon:function(){return o(it,{size:"medium"},null)},onClick:e.onReset},null)])]}}),e.currentImage.download&&o(M,{icon:function(){return o(pt,{size:"medium"},null)},onClick:function(){zt(l.value)}},null)])])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Bt=P({name:"TImageViewerModal",props:{zIndex:Number,visible:Boolean,index:Number,images:W.images,scale:Number,rotate:Number,mirror:Number,title:W.title,currentImage:{type:Object,default:function(){return{}}},onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,onClose:W.onClose,draggable:{type:Boolean,default:!0},viewerScale:{type:Object,default:function(){return{}}},showOverlay:Boolean,closeBtn:W.closeBtn},setup:function(e){var t=L(),n=ve(),a=s(function(){return{minWidth:e.viewerScale.minWidth,minHeight:e.viewerScale.minHeight}});return function(){return o(dt,{destroyOnClose:!0,attach:"body",onClose:e.onClose,visible:e.visible,placement:"center",mode:"modeless",width:1e3,cancelBtn:null,confirmBtn:null,draggable:e.draggable,zIndex:e.zIndex,showOverlay:e.showOverlay,class:"".concat(t.value,"-image-viewer__dialog"),header:n("title",""),footer:function(){return o("div",{class:"".concat(t.value,"-image-viewer-mini__footer")},[o(Te,{onZoomIn:e.onZoomIn,onZoomOut:e.onZoomOut,scale:e.scale,currentImage:e.currentImage,onRotate:e.onRotate,onMirror:e.onMirror,onReset:e.onReset},null)])}},{default:function(){return[o("div",{class:"".concat(t.value,"-image-viewer-mini__content"),style:a.value},[o(Be,{rotate:e.rotate,scale:e.scale,mirror:e.mirror,src:e.currentImage.mainImage,placementSrc:e.currentImage.thumbnail,isSvg:e.currentImage.isSvg},null)])]}})}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var A=function(r){return r.left="ArrowLeft",r.up="ArrowUp",r.right="ArrowRight",r.down="ArrowDown",r.esc="Escape",r}(A||{});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function De(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function Tt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?De(Object(t),!0).forEach(function(n){V(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Vt=P({name:"TImageViewer",props:Tt({},W),setup:function(e){var t,n=L(),a=L("image-viewer"),l=ve(),m=S(!0),c=s(function(){return Rt(e)}),i=$e(e),d=i.index,v=i.visible,g=i.modelValue,j=at(d,(t=e.defaultIndex)!==null&&t!==void 0?t:0,e.onIndexChange,"index"),F=be(j,2),_=F[0],z=F[1],E=ot(v,g,e.defaultVisible,function(){},"visible"),Q=be(E,2),D=Q[0],ee=Q[1],N=S(!0),te=S(),C=We(function(){return e.attach}),oe=s(function(){return[a.value,"".concat(a.value,"-preview-image"),V({},"".concat(n.value,"-is-hide"),!D.value)]}),U=s(function(){return["".concat(n.value,"-image-viewer__modal-header"),V({},"".concat(n.value,"-is-show"),m.value)]}),w=s(function(){var f;return(f=e.zIndex)!==null&&f!==void 0?f:2600}),p=function(){m.value=!m.value},y=Ct(),H=y.mirror,R=y.onMirror,re=y.resetMirror,x=xt(e.imageScale),Z=x.scale,O=x.onZoomIn,I=x.onZoomOut,X=x.resetScale,B=kt(),Y=B.rotate,K=B.onRotate,k=B.resetRotate,$=function(){re(),X(),k()},T=s(function(){return $t(e.images)}),h=s(function(){var f;return(f=T.value[_.value])!==null&&f!==void 0?f:{mainImage:""}}),le=Je("dialog",{visible:D}),Ve=le.isLastDialog,me=function(){var u=_.value-1;$(),z(u<0?0:u,{trigger:"prev"})},de=function(){var u=_.value+1;$(),z(u>=T.value.length?_.value:u,{trigger:"next"})},Fe=function(u){z(u,{trigger:"current"})},fe=function(){ee(!0)},ne=function(u){var b;ee(!1),(b=e.onClose)===null||b===void 0||b.call(e,u)},Ee=function(u){ne({e:u,trigger:"close-btn"})},Ne=function(u){e.closeOnOverlay&&ne({e:u,trigger:"overlay"})},He=function(u){switch(u.stopPropagation(),u.code){case A.left:me();break;case A.right:de();break;case A.up:O();break;case A.down:I();break;case A.esc:e.closeOnEscKeydown&&Ve()&&ne({e:u,trigger:"esc"});break}},ge=S();se(function(){return D.value},function(f){clearTimeout(te.value),f?(N.value=!1,Ge().then(function(){var u,b;(u=ge.value)===null||u===void 0||(b=u.focus)===null||b===void 0||b.call(u)}),$()):te.value=setTimeout(function(){N.value=!0},200)});var Ze=function(u){u.preventDefault();var b=u.deltaY;b>0?I():O()},Ae=s(function(){return{transform:"translateX(calc(-".concat(_.value," * (40px / 9 * 16 + 4px)))")}}),Le=function(){return o("div",{class:U.value},[o(M,{icon:function(){return o(mt,null,null)},class:"".concat(a.value,"__header-pre-bt"),onClick:p},null),o("div",{class:"".concat(a.value,"__header-prev")},[o("div",{class:"".concat(a.value,"__header-trans"),style:Ae.value},[T.value.map(function(u,b){return o("div",{key:b,class:["".concat(a.value,"__header-box"),V({},"".concat(n.value,"-is-active"),b===_.value)]},[o(ut,{src:u.thumbnail||u.mainImage,error:"",className:"".concat(a.value,"__header-img"),onClick:function(){return Fe(b)}},null)])})])])])},pe=function(u){var b=u==="prev"?0:180,we=l("navigationArrow",o(ft,{style:{transform:"rotate(".concat(b,"deg)")},size:"24px"},null));return o(M,{class:"".concat(a.value,"__modal-").concat(u,"-bt"),onClick:u==="prev"?me:de,icon:function(){return we}},null)},Ue=function(){if(e.closeBtn!==!1)return o("div",{class:["".concat(a.value,"__modal-icon"),"".concat(a.value,"__modal-close-bt")],onClick:Ee},[l("closeBtn",o(rt,{size:"24px"},null))])};return function(){return e.mode==="modeless"?o(ie,null,[l("trigger",{params:{open:fe}}),o(Bt,{zIndex:w.value,visible:D.value,index:_.value,images:T.value,scale:Z.value,rotate:Y.value,mirror:H.value,currentImage:h.value,onRotate:K,onZoomIn:O,onZoomOut:I,onMirror:R,onReset:$,onClose:ne,draggable:e.draggable,showOverlay:c.value,title:e.title},null)]):o(ie,null,[l("trigger",{params:{open:fe}}),o(qe,{disabled:!e.attach||!C.value,to:C.value},{default:function(){return[o(Qe,null,{default:function(){return[(D.value||!N.value)&&et(o("div",{ref:ge,class:oe.value,style:{zIndex:w.value},onWheel:Ze,tabindex:-1,onKeydown:He},[!!c.value&&o("div",{class:"".concat(a.value,"__modal-mask"),onClick:Ne},null),T.value.length>1&&o(ie,null,[Le(),o("div",{class:"".concat(a.value,"__modal-index")},[e.title&&l("title"),"".concat(_.value+1,"/").concat(T.value.length)]),pe("prev"),pe("next")]),Ue(),o(Te,{onZoomIn:O,onZoomOut:I,onMirror:R,onReset:$,onRotate:K,scale:Z.value,currentImage:h.value},null),o(Be,{scale:Z.value,rotate:Y.value,mirror:H.value,src:h.value.mainImage,placementSrc:h.value.thumbnail,isSvg:h.value.isSvg},null)]),[[tt,D.value]])]}})]}})])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Kt=nt(Vt);export{Kt as I};
