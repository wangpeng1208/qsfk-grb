import{_ as ft}from"./useLengthLimit-DKh2E-5w.js";import{r as pt,l as w,e as ee,U as ie,v as Ae,a9 as qe,_ as W,T as Ce,a4 as Qe,d as Pe,an as Re,a8 as et,C as ce,a1 as tt,as as lt,a0 as ht,a as E,a3 as nt,P as gt,$ as De,L as Ne,E as at,F as Fe,a6 as bt,Q as ke,ac as yt,W as ne,N as we,at as he,a5 as Te,ao as Be,ad as He}from"./index-DyfhlEKp.js";import{p as mt}from"./dep-02de0cb4-VTr6AM5L.js";import{d as St}from"./dep-96cefb8b-B7fBVahI.js";import{a as Ot,i as Ct}from"./index-c2cc7QiC.js";import{S as wt,F as Pt}from"./index-BD2FLwpo.js";import{u as Ee}from"./useDefaultValue-Ddzubvc6.js";import{u as Vt}from"./useVModel-CsuQbcSh.js";import{u as xt}from"./slot-cq2gaFzZ.js";/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Ye(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,n)}return t}function ze(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ye(Object(t),!0).forEach(function(n){W(l,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))})}return l}var It=function(e){var t=e.data,n=e.container,r=e.fixedHeight,P=r===void 0?!1:r,g=e.lineHeight,h=g===void 0?30:g,u=e.bufferSize,s=u===void 0?20:u,D=e.threshold,V=D===void 0?100:D,a=pt({visibleData:[],cachedHeight:[],cachedScrollY:[]}),_=w(function(){return t.value.length>V}),i=ee(0),O=new Map,k=0,R=0,f=0,C=0,c=0,p=0,x=function(){t.value.forEach(function(y,m){y.$index=m,P&&(a.cachedScrollY[m]=m*h)}),P||(a.cachedScrollY[t.value.length-1]=void 0)};x();var F=w(function(){var T=a.cachedHeight,y=T.length;if(y){var m=T.reduce(function(L,J){return L+J||h},0);if(T.length===t.value.length)return m;var M=m/T.length;return m+(t.value.length-T.length)*M}return _.value?t.value.length*h:0}),b=w(function(){var T=a.visibleData,y=T[0];return y?T.length===1?0:a.cachedScrollY[y.$index]:0}),I=function(){p=Math.min(c+k+s*2,t.value.length),a.visibleData=t.value.slice(c,p)},H=function(){var y,m=O.get(f);if(m){var M=m==null||(y=m.getBoundingClientRect())===null||y===void 0?void 0:y.height;a.cachedScrollY[f]=n.value.scrollTop-C,a.cachedHeight[f]=M;for(var L=f+1;L<=((J=a.visibleData[a.visibleData.length-1])===null||J===void 0?void 0:J.$index);L++){var J,Z=O.get(L),xe=(Z==null?void 0:Z.getBoundingClientRect())||{},Ie=xe.height;a.cachedHeight[L]=Ie;var je=a.cachedScrollY[L-1]+a.cachedHeight[L-1];a.cachedScrollY.splice(L,1,je)}for(var G=f-1;G>=((ve=a.visibleData[0])===null||ve===void 0?void 0:ve.$index);G--){var ve,ae=O.get(G),ge=(ae==null?void 0:ae.getBoundingClientRect())||{},be=ge.height;a.cachedHeight[G]=be;var se=a.cachedScrollY[G+1]-a.cachedHeight[G];a.cachedScrollY.splice(G,1,se)}if(a.cachedScrollY[0]>0){for(var te=a.cachedScrollY[0],re=Math.min(p,t.value.length),oe=0;oe<re;oe++)a.cachedScrollY.splice(oe,1,a.cachedScrollY[oe]-te);var ye=a.cachedScrollY[f-1]?a.cachedScrollY[f-1]+C:C;n.value.scrollTop=ye,R=ye}if(a.cachedScrollY[c]<0){var de=a.cachedHeight.slice(0,Math.max(0,f)).reduce(function(le,fe){return le+fe},0)+C;n.value.scrollTop=de,R=de,de===0&&(f=0,C=0)}Ce(function(){var le=n.value,fe=le.scrollTop,pe=le.scrollHeight,me=le.clientHeight;if(fe+me===pe)for(var q=p-1;q>=c;q--)q===p-1?a.cachedScrollY.splice(q,1,pe.value-a.cachedHeight[q]):a.cachedScrollY.splice(q,1,a.cachedScrollY[q+1]-a.cachedHeight[q])})}},j=function(){if(_.value){var y=n.value.scrollTop,m=y-R;R=y,m+=C;var M=f;if(m){if(m>=0){for(;M<t.value.length&&m>(a.cachedHeight[M]||h);)a.cachedHeight[M]||(a.cachedHeight[M]=h),m-=a.cachedHeight[M],M++;M>=t.value.length?(f=t.value.length-1,C=0):(f=M,C=m);var L=n.value,J=L.clientHeight,Z=L.scrollHeight;y+J===Z&&(f=t.value.length-k+1),c<=f-s&&(c=Math.min(t.value.length-k,f-s),c<0&&(c=0))}else{for(;m<0;)M--,a.cachedHeight[M]||(a.cachedHeight[M]=h),m+=a.cachedHeight[M];M<0?(f=0,C=0):(f=M,C=m),H(),c>f-s&&(c=Math.max(0,f-s))}I()}}};!P&&ie(i,H,{flush:"post"});var N=function(){_.value&&i.value++};ie(t,function(){x(),a.visibleData=[],a.cachedScrollY=[],a.cachedHeight=[],R=0,f=0,C=0,c=0,O.clear(),t.value.length<=V?a.visibleData=t.value:I(),n.value&&(n.value.scrollTop=0)});var $=!1,z=function(){$&&(k=Math.ceil(n.value.offsetHeight/h),I())};return Ae(function(){if(!(!window||!window.IntersectionObserver)){var T=new window.IntersectionObserver(function(y){var m=y[0];(m.isIntersecting||m.intersectionRatio)&&($=!0,_.value&&z(),T.unobserve(n.value))});n.value&&T.observe(n.value)}}),ze(ze({trs:O,scrollHeight:F},qe(a)),{},{translateY:b,handleScroll:j,handleRowMounted:N,refreshContainer:z,fixedHeight:P,calculateScrollY:H})};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var jt={checkAll:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,label:{type:String,default:""},title:{type:String,default:""},value:{type:[String,Number]}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Tt(l,e){var t=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!t){if(Array.isArray(l)||(t=Dt(l))||e){t&&(l=t);var n=0,r=function(){};return{s:r,n:function(){return n>=l.length?{done:!0}:{done:!1,value:l[n++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P,g=!0,h=!1;return{s:function(){t=t.call(l)},n:function(){var s=t.next();return g=s.done,s},e:function(s){h=!0,P=s},f:function(){try{g||t.return==null||t.return()}finally{if(h)throw P}}}}function Dt(l,e){if(l){if(typeof l=="string")return Le(l,e);var t={}.toString.call(l).slice(8,-1);return t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set"?Array.from(l):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Le(l,e):void 0}}function Le(l,e){(e==null||e>l.length)&&(e=l.length);for(var t=0,n=Array(e);t<e;t++)n[t]=l[t];return n}var Ve=Symbol("selectProvide"),_e=function(e,t){var n=t.value.get(e);return(n==null?void 0:n.label)||(e==null?void 0:e.toString())},kt=function(e,t){var n=[],r=Tt(e),P;try{for(r.s();!(P=r.n()).done;){var g=P.value,h=_e(g,t);h&&n.push(h)}}catch(u){r.e(u)}finally{r.f()}return n},rt=function(e,t){var n=Qe(e),r=n.indexOf(t);return r<0?n.push(t):n.splice(r,1),{value:n,isCheck:r<0}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Ke(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,n)}return t}function Je(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ke(Object(t),!0).forEach(function(n){W(l,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))})}return l}function _t(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!nt(l)}var $e=Pe({name:"TOption",props:Je(Je({},jt),{},{createAble:Boolean,multiple:Boolean,index:Number,rowIndex:Number,trs:Map,scrollType:String,isVirtual:Boolean,bufferSize:Number,checkAll:Boolean}),emits:["row-mounted"],setup:function(e,t){var n=Re(Ve),r=et(),P=w(function(){return n.value.max!==0&&n.value.max<=n.value.selectValue.length}),g=w(function(){return r.value||e.multiple&&P.value&&!i.value&&!n.value.isCheckAll}),h=gt(),u=ce("select"),s=tt(),D=s.STATUS,V=s.SIZE,a=ee(),_=ee(!1),i=w(function(){return n.value.isCheckAll&&!e.disabled?!0:e.multiple?n.value.selectValue.includes(e.value):n.value.selectValue===e.value}),O=w(function(){return e.checkAll?n.value.indeterminate:!1}),k=w(function(){return["".concat(u.value,"-option"),[V.value[n.value.size]],W(W(W({},D.value.disabled,g.value),D.value.selected,i.value),"".concat(u.value,"-option__hover"),(_.value||n.value.hoverIndex===e.index)&&!g.value)]}),R=w(function(){return e.label||e.value}),f=function(p){if(!(e.disabled||g.value)){if(e.multiple){C(!i.value,{e:p}),p.preventDefault();return}if(e.createAble){var x,F;if((x=(F=n.value).handleCreate)===null||x===void 0||x.call(F,e.value),n.value.multiple){n.value.handleValueChange([].concat(De(n.value.selectValue),[e.value]),{selectedOptions:n.value.getSelectedOptions(),trigger:"check",e:p});return}}var b=n.value.getSelectedOptions(e.value);n.value.handleValueChange(e.value,{option:b==null?void 0:b[0],selectedOptions:b,trigger:"check",e:p}),n.value.handlePopupVisibleChange(!1,{e:p})}},C=function(p,x){if(e.checkAll){n.value.onCheckAllChange(p);return}var F=rt(n.value.selectValue,e.value),b=n.value.getSelectedOptions(F.value);n.value.handleValueChange(F.value,{option:b.find(function(I){return I.value===e.value}),selectedOptions:b,trigger:p?"check":"uncheck",e:x.e}),n.value.reserveKeyword||n.value.handlerInputChange("")};return Ae(function(){var c=e.trs,p=e.rowIndex,x=e.isVirtual;x&&(c.set(p,a.value),t.emit("row-mounted"))}),lt(function(){if(e.isVirtual){var c=e.trs,p=e.rowIndex;c.delete(p)}}),ht(a),function(){var c=h("default","content")||R.value;return E("li",{ref:a,class:k.value,title:e.title||"".concat(R.value),onMouseenter:function(){return _.value=!0},onMouseleave:function(){return _.value=!1},onClick:f},[n&&e.multiple?E(Ot,{checked:i.value,disabled:g.value,onChange:C,indeterminate:O.value},_t(c)?c:{default:function(){return[c]}}):E("span",null,[c])])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var $t={divider:{type:Boolean,default:!0},label:{type:String,default:""}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Xe(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,n)}return t}function At(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(t),!0).forEach(function(n){W(l,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))})}return l}var ot=Pe({name:"TOptionGroup",props:At({},$t),setup:function(e){var t=Re(Ve),n=ce("select-option-group"),r=tt(),P=r.SIZE,g=Ne(),h=w(function(){return[n.value,P.value[t.value.size],W({},"".concat(n.value,"__divider"),e.divider)]});return function(){return E("li",{class:h.value},[E("div",{class:"".concat(n.value,"__header")},[e.label]),g("default")])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var X={autoWidth:Boolean,autofocus:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},creatable:Boolean,disabled:{type:Boolean,default:void 0},empty:{type:[String,Function]},filter:{type:Function},filterable:Boolean,inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},label:{type:[String,Function]},loading:Boolean,loadingText:{type:[String,Function]},max:{type:Number,default:0},minCollapsedNum:{type:Number,default:0},multiple:Boolean,options:{type:Array},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:Boolean,prefixIcon:{type:Function},readonly:Boolean,reserveKeyword:Boolean,scroll:{type:Object},selectInputProps:{type:Object},showArrow:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Boolean,Object,Array],default:void 0},modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Object,Array],default:void 0},valueDisplay:{type:[String,Function]},valueType:{type:String,default:"value",validator:function(e){return e?["value","object"].includes(e):!0}},onBlur:Function,onChange:Function,onClear:Function,onCreate:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onPopupVisibleChange:Function,onRemove:Function,onSearch:Function};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Rt=function(e){var t,n,r,P,g,h=w(function(){var I,H,j;return((I=e.scroll)===null||I===void 0?void 0:I.type)==="virtual"&&((H=e.options.value)===null||H===void 0?void 0:H.length)>(((j=e.scroll)===null||j===void 0?void 0:j.threshold)||100)}),u=((t=e.scroll)===null||t===void 0?void 0:t.type)==="virtual"?It({container:e.popupContentRef,data:e.options,fixedHeight:((n=e.scroll)===null||n===void 0?void 0:n.isFixedRowHeight)||!1,lineHeight:((r=e.scroll)===null||r===void 0?void 0:r.rowHeight)||28,bufferSize:((P=e.scroll)===null||P===void 0?void 0:P.bufferSize)||20,threshold:((g=e.scroll)===null||g===void 0?void 0:g.threshold)||100}):{},s=u.trs,D=s===void 0?null:s,V=u.visibleData,a=V===void 0?null:V,_=u.handleScroll,i=_===void 0?null:_,O=u.scrollHeight,k=O===void 0?null:O,R=u.translateY,f=R===void 0?null:R,C=u.handleRowMounted,c=C===void 0?null:C,p=-1,x=function(H){if(h.value){var j=H.target,N=j.scrollTop;Math.abs(p-N)>5?(i(),p=N):p=-1}};Ae(function(){var I;(I=e.popupContentRef.value)===null||I===void 0||I.addEventListener("scroll",x)}),lt(function(){var I;(I=e.popupContentRef.value)===null||I===void 0||I.removeEventListener("scroll",x)});var F=w(function(){return{position:"absolute",width:"1px",height:"1px",transition:"transform 0.2s",transform:"translate(0, ".concat(k.value,"px)"),"-ms-transform":"translate(0, ".concat(k.value,"px)"),"-moz-transform":"translate(0, ".concat(k.value,"px)"),"-webkit-transform":"translate(0, ".concat(k.value,"px)")}}),b=w(function(){return{transform:"translate(0, ".concat(f.value,"px)"),"-ms-transform":"translate(0, ".concat(f.value,"px)"),"-moz-transform":"translate(0, ".concat(f.value,"px)"),"-webkit-transform":"translate(0, ".concat(f.value,"px)")}});return{trs:D,scrollHeight:k,translateY:f,visibleData:a,handleRowMounted:c,isVirtual:h,cursorStyle:F,panelStyle:b}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Nt(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!nt(l)}var Ht=Pe({name:"TSelectPanel",props:{inputValue:X.inputValue,panelTopContent:X.panelTopContent,panelBottomContent:X.panelBottomContent,empty:X.empty,creatable:X.creatable,loading:X.loading,loadingText:X.loadingText,multiple:X.multiple,filterable:X.filterable,filter:X.filter,scroll:X.scroll,size:X.size},setup:function(e,t){var n=t.expose,r=ce("select"),P=Ne(),g=bt(),h=at("select"),u=h.t,s=h.globalConfig,D=Re(Ve),V=ee(null),a=w(function(){return D.value.popupContentRef.value}),_=w(function(){return e.creatable&&e.filterable&&e.inputValue}),i=w(function(){return D.value.displayOptions}),O=Rt({scroll:e.scroll,popupContentRef:a,options:i}),k=O.trs,R=O.visibleData,f=O.handleRowMounted,C=O.isVirtual,c=O.panelStyle,p=O.cursorStyle,x=w(function(){return!i.value.length}),F=function(){return E("ul",{class:["".concat(r.value,"__create-option"),"".concat(r.value,"__list")]},[E($e,{value:e.inputValue,label:"".concat(e.inputValue),createAble:!0,class:"".concat(r.value,"__create-option--special")},null)])},b=function(N){return E("ul",{class:"".concat(r.value,"__list")},[N.map(function($,z){var T,y;if($.group){var m;return E(ot,{label:$.group,divider:$.divider},Nt(m=b($.children))?m:{default:function(){return[m]}})}return E($e,ke(yt($,"index","$index","className","tagName"),C.value?{rowIndex:$.$index,trs:k,scrollType:(T=e.scroll)===null||T===void 0?void 0:T.type,isVirtual:C.value,bufferSize:(y=e.scroll)===null||y===void 0?void 0:y.bufferSize,key:"".concat($.$index||"","_").concat(z)}:{key:"".concat(z,"_").concat($.value)},{index:z,multiple:e.multiple,onRowMounted:f}),$.slots)})])},I=w(function(){return{small:"s",medium:"m",large:"l"}[D.value.size]});n({innerRef:V,visibleData:R,isVirtual:C,displayOptions:i});var H=function(N,$){return E("div",{ref:V,class:["".concat(r.value,"__dropdown-inner"),"".concat(r.value,"__dropdown-inner--size-").concat(I.value)],style:$},[_.value&&F(),e.loading&&g("loadingText",{defaultNode:E("div",{class:"".concat(r.value,"__loading-tips")},[u(s.value.loadingText)])}),!e.loading&&x.value&&!_.value&&g("empty",{defaultNode:E("div",{class:"".concat(r.value,"__empty")},[u(s.value.empty)])}),!x.value&&!e.loading&&b(N)])};return{renderPanel:H,panelStyle:c,cursorStyle:p,isVirtual:C,displayOptions:i,visibleData:R,renderTNodeJSX:P}},render:function(){return this.isVirtual?E(Fe,null,[this.renderTNodeJSX("panelTopContent"),E("div",null,[E("div",{style:this.cursorStyle},null),this.renderPanel(this.visibleData,this.panelStyle)]),this.renderTNodeJSX("panelBottomContent")]):E(Fe,null,[this.renderTNodeJSX("panelTopContent"),this.renderPanel(this.displayOptions),this.renderTNodeJSX("panelBottomContent")])}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Oe(l,e){var t=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!t){if(Array.isArray(l)||(t=Mt(l))||e){t&&(l=t);var n=0,r=function(){};return{s:r,n:function(){return n>=l.length?{done:!0}:{done:!1,value:l[n++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P,g=!0,h=!1;return{s:function(){t=t.call(l)},n:function(){var s=t.next();return g=s.done,s},e:function(s){h=!0,P=s},f:function(){try{g||t.return==null||t.return()}finally{if(h)throw P}}}}function Mt(l,e){if(l){if(typeof l=="string")return Ue(l,e);var t={}.toString.call(l).slice(8,-1);return t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set"?Array.from(l):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ue(l,e):void 0}}function Ue(l,e){(e==null||e>l.length)&&(e=l.length);for(var t=0,n=Array(e);t<e;t++)n[t]=l[t];return n}function We(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,n)}return t}function U(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?We(Object(t),!0).forEach(function(n){W(l,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))})}return l}var Ft=function(e,t,n){var r=xt(),P=ee([]),g=w(function(){var D,V=0,a=((D=e.options)===null||D===void 0?void 0:D.map(function(j){var N=function(z){var T=t.value,y=T.value,m=T.label,M=T.disabled,L=U(U({},z),{},{index:V,label:he(z,m),value:he(z,y),disabled:he(z,M)});return V++,L};return j.group&&j.children?U(U({},j),{},{children:j.children.map(function($){return N($)})}):N(j)}))||[],_=r("Option"),i=r("OptionGroup");if(ne(i)){var O=Oe(i),k;try{for(O.s();!(k=O.n()).done;){var R,f=k.value,C=U(U({group:(R=f.props)===null||R===void 0?void 0:R.label},f.props),{},{children:[]}),c=r("Option",f.children);if(ne(c)){var p=Oe(c),x;try{for(p.s();!(x=p.n()).done;){var F=x.value;C.children.push(U(U({},F.props),{},{slots:F.children,index:V})),V++}}catch(j){p.e(j)}finally{p.f()}a.push(C)}}}catch(j){O.e(j)}finally{O.f()}}if(ne(_)){var b=Oe(_),I;try{for(b.s();!(I=b.n()).done;){var H=I.value;a.push(U(U({},H.props),{},{slots:H.children,index:V})),V++}}catch(j){b.e(j)}finally{b.f()}}return a}),h=w(function(){var D=[],V=function(_){var i=Oe(_),O;try{for(i.s();!(O=i.n()).done;){var k=O.value;k.group?V(k.children):D.push(k)}}catch(R){i.e(R)}finally{i.f()}};return V(g.value),D}),u=w(function(){var D=new Map;return P.value.concat(h.value).forEach(function(V){D.set(V.value,V)}),D}),s=w(function(){if(e.onSearch&&e.filterable||!n.value||!(e.filterable||we(e.filter)))return g.value;var D=function(_){var i,O;return we(e.filter)?e.filter("".concat(n.value),_):((i=_.label)===null||i===void 0||(O=i.toLowerCase)===null||O===void 0?void 0:O.call(i).indexOf("".concat(n.value).toLowerCase()))>-1},V=[];return g.value.forEach(function(a){a.group&&a.children&&V.push(U(U({},a),{},{children:a.children.filter(D)})),D(a)&&V.push(a)}),V});return{options:g,optionsMap:u,optionsList:h,optionsCache:P,displayOptions:s}};/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */function Bt(l){var e=l.displayOptions,t=l.optionsList,n=l.innerPopupVisible,r=l.setInnerPopupVisible,P=l.selectPanelRef,g=l.isFilterable,h=l.isRemoteSearch,u=l.getSelectedOptions,s=l.setInnerValue,D=l.innerValue,V=l.popupContentRef,a=l.multiple,_=l.max,i=ee(-1),O=ee([]),k=ee([]),R=ce(),f=function(c){var p,x,F=e.value.length,b=i.value;switch(c.code){case"ArrowUp":c.preventDefault(),i.value===-1?b=0:i.value===0||i.value>e.value.length-1?b=F-1:b--,(p=t.value[b])!==null&&p!==void 0&&p.disabled&&b--,i.value=b;break;case"ArrowDown":c.preventDefault(),i.value===-1||i.value>=F-1?b=0:b++,(x=t.value[b])!==null&&x!==void 0&&x.disabled&&b++,i.value=b;break;case"Enter":if(i.value===-1)break;var I=P.value.isVirtual&&g.value&&k.value.length?k.value:h.value?t.value:O.value;if(I.length||(I=t.value),!n.value){r(!0,{e:c});break}if(a){var j;if(i.value===-1)return;var N=(j=I[i.value])===null||j===void 0?void 0:j.value;if(!N)return;var $=rt(D.value,N);if(_>0&&$.value.length>_)return;var z=u($.value);s($.value,{option:z.find(function(T){return T.value==N}),selectedOptions:z,trigger:$.isCheck?"check":"uncheck",e:c}),O.value=[]}else{var H=u(I[i.value].value);s(I[i.value].value,{option:H==null?void 0:H[0],selectedOptions:u(I[i.value].value),trigger:"check",e:c}),r(!1,{e:c})}break;case"Escape":r(!1,{e:c});break}};return ie(n,function(C){C&&(i.value=-1,k.value=[],O.value=[])}),ie(i,function(C){var c,p=(c=P.value)===null||c===void 0||(c=c.innerRef)===null||c===void 0?void 0:c.querySelector(".".concat(R.value,"-select-option")).clientHeight,x=p*C;V.value.scrollTo({top:x,behavior:"smooth"})}),{hoverIndex:i,handleKeyDown:f,virtualFilteredOptions:k,filteredOptions:O}}/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var Et=["overlayClassName"];function Yt(l,e){var t=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!t){if(Array.isArray(l)||(t=zt(l))||e){t&&(l=t);var n=0,r=function(){};return{s:r,n:function(){return n>=l.length?{done:!0}:{done:!1,value:l[n++]}},e:function(s){throw s},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P,g=!0,h=!1;return{s:function(){t=t.call(l)},n:function(){var s=t.next();return g=s.done,s},e:function(s){h=!0,P=s},f:function(){try{g||t.return==null||t.return()}finally{if(h)throw P}}}}function zt(l,e){if(l){if(typeof l=="string")return Ze(l,e);var t={}.toString.call(l).slice(8,-1);return t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set"?Array.from(l):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ze(l,e):void 0}}function Ze(l,e){(e==null||e>l.length)&&(e=l.length);for(var t=0,n=Array(e);t<e;t++)n[t]=l[t];return n}function Ge(l,e){var t=Object.keys(l);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(l);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),t.push.apply(t,n)}return t}function Q(l){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ge(Object(t),!0).forEach(function(n){W(l,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach(function(n){Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(t,n))})}return l}var Lt=Pe({name:"TSelect",props:Q(Q({},X),{},{valueDisplayOptions:{type:Object}}),setup:function(e,t){var n=t.slots,r=ce(),P=et(),g=Ne(),h=ce("select"),u=at("select"),s=u.globalConfig,D=u.t,V=qe(e),a=V.popupVisible,_=V.inputValue,i=V.modelValue,O=V.value,k=Ee(_,e.defaultInputValue,e.onInputChange,"inputValue"),R=Te(k,2),f=R[0],C=R[1],c=Vt(O,i,e.defaultValue,e.onChange),p=Te(c,2),x=p[0],F=p[1],b=ee(null),I=ee(null),H=w(function(){var d,o,v;return{label:((d=e.keys)===null||d===void 0?void 0:d.label)||"label",value:((o=e.keys)===null||o===void 0?void 0:o.value)||"value",disabled:((v=e.keys)===null||v===void 0?void 0:v.disabled)||"disabled"}}),j=Ft(e,H,f),N=j.optionsMap,$=j.optionsList,z=j.optionsCache,T=j.displayOptions,y=w(function(){return x.value===void 0?e.multiple?[]:void 0:e.valueType==="object"?e.multiple?x.value.map(function(d){return d[H.value.value]}):x.value[H.value.value]:x.value}),m=function(o,v){if(e.valueType==="object"){var S=H.value,A=S.value,B=S.label,Y=function(ue){if(ue!==void 0){var Se=N.value.get(ue);return W(W({},A,he(Se,A)),B,he(Se,B))}};o=e.multiple?o.map(function(K){return Y(K)}):Y(o)}o!==x.value&&F(o,Q({selectedOptions:te(o)},v))},M=Ee(a,!1,function(d,o){var v;(v=e.onPopupVisibleChange)===null||v===void 0||v.call(e,d,o)},"popupVisible"),L=Te(M,2),J=L[0],Z=L[1],xe=w(function(){var d;return(d=!e.multiple&&J.value&&_e(y.value,N)||e.placeholder)!==null&&d!==void 0?d:D(s.value.placeholder)}),Ie=w(function(){return e.multiple?kt(y.value,N):_e(y.value,N)}),je=w(function(){var d=e.multiple&&ne(y.value)?y.value.map(function(S){var A;return{value:S,label:(A=N.value.get(S))===null||A===void 0?void 0:A.label}}):y.value,o={value:d,onClose:e.multiple?function(S){return ae(S)}:function(){}};if(e.minCollapsedNum&&e.multiple){var v;return Q(Q({},o),{},{displayValue:d==null||(v=d.slice)===null||v===void 0?void 0:v.call(d,0,e.minCollapsedNum)})}return o}),G=w(function(){return!!(e.filterable||s.value.filterable||we(e.filter))}),ve=w(function(){return!!((e.filterable||s.value.filterable)&&we(e.onSearch))}),ae=function(o,v){var S,A=Qe(y.value),B=A[o];A.splice(o,1),m(A,{selectedOptions:te(A),trigger:"tag-remove",e:v}),(S=e.onRemove)===null||S===void 0||S.call(e,{value:B,data:N.value.get(B),e:v})},ge=function(){var o;f.value&&((o=e.onCreate)===null||o===void 0||o.call(e,f.value),C(""))},be=w(function(){var d;return(d=I.value)===null||d===void 0?void 0:d.popupRef.getOverlay()}),se=w(function(){return $.value.filter(function(d){return!d.disabled&&!d["check-all"]&&!d.checkAll})}),te=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.value;return $.value.filter(function(v){if(!v.checkAll)return ne(o)?o.includes(v.value):o===v.value})},re=Bt({displayOptions:T,optionsList:$,innerPopupVisible:J,setInnerPopupVisible:Z,selectPanelRef:b,isFilterable:G,isRemoteSearch:ve,getSelectedOptions:te,setInnerValue:m,innerValue:y,popupContentRef:be,multiple:e.multiple,max:e.max}),oe=re.hoverIndex,ye=re.virtualFilteredOptions,de=re.handleKeyDown,le=re.filteredOptions,fe=function(o){if(e.multiple){var v=o?se.value.map(function(S){return S.value}):[];m(v,{selectedOptions:te(v),trigger:o?"check":"clear"})}},pe=w(function(){var d=se.value.map(function(v){return v.value}),o=Ct(y.value,d);return o.length}),me=w(function(){return pe.value===se.value.length}),q=w(function(){return!me.value&&pe.value!==0}),ut=w(function(){return{max:e.max,multiple:e.multiple,hoverIndex:oe.value,selectValue:y.value,reserveKeyword:e.reserveKeyword,handleValueChange:m,handlerInputChange:C,handlePopupVisibleChange:Z,handleCreate:ge,size:e.size,popupContentRef:be,indeterminate:q.value,isCheckAll:me.value,onCheckAllChange:fe,getSelectedOptions:te,displayOptions:T.value}});Be(Ve,ut);var Me=function(){!e.multiple&&ne(x.value)&&F(void 0,{selectedOptions:[],trigger:"default"}),e.multiple&&!ne(x.value)&&F([],{selectedOptions:[],trigger:"default"})},it=St(function(d,o){var v,S=o.e;(v=e.onSearch)===null||v===void 0||v.call(e,"".concat(d),{e:S})},300),ct=function(o,v){o&&!J.value&&Z(!0,{e:v.e}),C(o),it("".concat(o),{e:v.e}),Ce(function(){var S,A;ye.value=(S=b.value)===null||S===void 0?void 0:S.visibleData,le.value=(A=b.value)===null||A===void 0?void 0:A.displayOptions})},vt=function(o,v){Z(o,v),o&&v.trigger==="trigger-element-click"&&C("")},st=function(o){if(e.multiple){var v=[],S=Yt(o||[]),A;try{for(S.s();!(A=S.n()).done;){var B=A.value,Y=N.value.get(B);Y&&v.push(Y)}}catch(ue){S.e(ue)}finally{S.f()}z.value=Array.from(new Set([].concat(v,De(z.value))))}else{var K=N.value.get(o);K&&(z.value=Array.from(new Set([K].concat(De(z.value)))))}};ie(x,function(d){Me(),Ce(function(){st(d)})},{immediate:!0}),ie(function(){return e.multiple},function(){Me()});var dt=function(o){var v;if(b.value){var S=(v=b.value)===null||v===void 0||(v=v.innerRef)===null||v===void 0?void 0:v.querySelector(".".concat(r.value,"-is-selected"));Ce(function(){if(S&&o){var A=getComputedStyle(S),B=A.paddingBottom,Y=getComputedStyle(o),K=Y.marginBottom,ue=parseInt(B,10)+parseInt(K,10),Se=S.offsetTop-o.offsetTop-(o.clientHeight-S.clientHeight)+ue;o.scrollTop=Se}})}};return Be("updateScrollTop",dt),function(){var d=e.popupProps||{},o=d.overlayClassName,v=ft(d,Et);return E("div",{class:"".concat(h.value,"__wrap")},[E(wt,ke({autoWidth:e.autoWidth,readonly:e.readonly,borderless:e.borderless,multiple:e.multiple,clearable:e.clearable,loading:e.loading,status:e.status,tips:e.tips,minCollapsedNum:e.minCollapsedNum,autofocus:e.autofocus,suffix:e.suffix,valueDisplayOptions:e.valueDisplayOptions},{ref:I,class:h.value,value:Ie.value,disabled:P.value,popupVisible:J.value,inputValue:J.value?f.value:"",placeholder:"".concat(xe.value),allowInput:G.value,"collapsed-items":e.collapsedItems,inputProps:Q(Q({size:e.size,autofocus:e.autofocus},e.inputProps),{},{onkeydown:de}),tagInputProps:Q({size:e.size},e.tagInputProps),onTagChange:function(A,B){ae(B.index)},tagProps:Q({},e.tagProps),popupProps:Q({overlayClassName:["".concat(h.value,"__dropdown"),o]},v),label:e.label,prefixIcon:e.prefixIcon,suffix:e.suffix,suffixIcon:function(){return e.suffixIcon||n.suffixIcon?g("suffixIcon"):e.showArrow&&E(Pt,{overlayClassName:"".concat(h.value,"__right-icon"),isActive:J.value},null)},valueDisplay:function(){return g("valueDisplay",{params:je.value})},onPopupVisibleChange:vt,onInputChange:ct,onClear:function(A){var B,Y=A.e;m(e.multiple?[]:void 0,{option:null,selectedOptions:te(e.multiple?[]:void 0),trigger:"clear",e:Y}),(B=e.onClear)===null||B===void 0||B.call(e,{e:Y})},onEnter:function(A,B){var Y=B.e;setTimeout(function(){var K;(K=e.onEnter)===null||K===void 0||K.call(e,{inputValue:"".concat(f.value),e:Y,value:y.value}),ge()},0)},onBlur:function(A,B){var Y,K=B.e;(Y=e.onBlur)===null||Y===void 0||Y.call(e,{e:K,value:y.value})},onFocus:function(A,B){var Y,K=B.e;(Y=e.onFocus)===null||Y===void 0||Y.call(e,{e:K,value:y.value})}},e.selectInputProps),{label:n.label,prefixIcon:n.prefixIcon,suffix:n.suffix,panel:function(){return E(Ht,ke({ref:b},mt(e,["size","multiple","empty","loading","loadingText","filterable","creatable","panelTopContent","panelBottomContent","filter","scroll"]),{inputValue:f.value}),n)},collapsedItems:n.collapsedItems})])}}});/**
 * tdesign v1.10.1
 * (c) 2024 tdesign
 * @license MIT
 */var el=He(Lt),tl=He($e);He(ot);export{tl as O,el as S};
