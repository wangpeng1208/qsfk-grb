import{d as A,e as a,aj as M,ak as N,l as D,o as k,p as x,g as o,a as e,w as t,u as L,ae as U,F as $,n as q,b as E,t as H,af as P,al as j,M as f,B as O,z as G,A as J,m as K}from"./index-Bl4AiOyE.js";import{C as Q,R as W}from"./index-BAEoUYZ2.js";import{I as X}from"./index-DaVESe2P.js";import{I as Y}from"./index-CLnbRl90.js";import{F as Z,a as ee}from"./index-DZCrjQ_3.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dep-d524834c-s9Vwwbzr.js";import"./useListener-BsDlpW-o.js";import"./useLengthLimit-zZTqNE_r.js";import"./log-ZJhmUOBa.js";import"./useReadonly-DZtTxOfz.js";import"./const-BLdXWxIl.js";import"./useVModel-HmF1Gebj.js";import"./useResizeObserver-BUPtuDKJ.js";import"./browse-CCDZKZZU.js";import"./close-circle-filled-xz65pYuL.js";import"./dep-86139c71-_Dj3X0D4.js";import"./form-model-BN3AK5Zp.js";import"./dep-4cc4ef27-Bxo4BcuK.js";import"./dep-40320ba3-B1Ayvxeb.js";const g=r=>(G("data-v-22e83983"),r=r(),J(),r),te=g(()=>o("div",{class:"bg-backdrop-layout",style:{"-webkit-backdrop-filter":"blur(25px)","backdrop-filter":"blur(25px)"}},null,-1)),se={class:"h-full"},ae={class:"login-container mx-auto"},ne={class:"cp loginf"},re={class:"logo"},le=["src"],ie=g(()=>o("div",{class:"systitle"},"-- 高性能虚拟产品寄售软件 @骑士个人版寄售系统",-1)),ce={class:"cp"},ue=g(()=>o("div",{class:"title-container"},[o("div",{class:"title margin-no"},"管理员登录")],-1)),me={class:"copyright"},pe=["innerHTML"],de=A({__name:"index",setup(r){const m=a({url:""});(async()=>{const c=await j();m.value=c.data})();const v=K(),b=M();(()=>{b.accessToken&&(f.success("已登录, 正在跳转到工作台..."),v.push({path:"/admin/workbench"}))})();const S={username:"",password:""},V={username:[{required:!0,message:"用户名必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}]},h=a("password"),B=a(),n=a({...S}),l=a(!1),p=a("登录"),i=a(!1),C=async c=>{if(c.validateResult===!0){p.value="登录中...",i.value=!0;try{await b.login(n.value),f.success("登陆成功"),v.push({path:"/admin/workbench"}),i.value=!1}catch(s){f.error(s.msg),i.value=!1,p.value="登录"}}},w=N(),z=D(()=>w.config.site_info_copyright);return(c,s)=>{const y=Q,d=X,I=Y,_=Z,F=O,R=ee,T=W;return k(),x("div",{class:"login-wrapper",style:P({backgroundImage:m.value.url?`url(${m.value.url})`:"none"})},[te,o("div",se,[o("div",ae,[e(T,null,{default:t(()=>[e(y,{span:6},{default:t(()=>[o("div",ne,[o("div",re,[o("img",{src:L(w).config.site_logo,alt:"logo",style:{"max-width":"100px"}},null,8,le)]),ie])]),_:1}),e(y,{span:6},{default:t(()=>[o("div",ce,[ue,e(R,{ref_key:"form",ref:B,class:U(["item-container",`login-${h.value}`]),data:n.value,rules:V,"label-width":"0",onSubmit:C},{default:t(()=>[h.value=="password"?(k(),x($,{key:0},[e(_,{name:"username"},{default:t(()=>[e(I,{modelValue:n.value.username,"onUpdate:modelValue":s[0]||(s[0]=u=>n.value.username=u),size:"large",placeholder:"请输入账号/手机号/邮箱"},{"prefix-icon":t(()=>[e(d,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(_,{name:"password"},{default:t(()=>[e(I,{modelValue:n.value.password,"onUpdate:modelValue":s[2]||(s[2]=u=>n.value.password=u),size:"large",type:l.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":t(()=>[e(d,{name:"lock-on"})]),"suffix-icon":t(()=>[e(d,{name:l.value?"browse":"browse-off",onClick:s[1]||(s[1]=u=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):q("",!0),e(_,{class:"btn-container"},{default:t(()=>[e(F,{block:"",type:"submit",size:"large",disabled:i.value},{default:t(()=>[E(H(p.value),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["class","data"])])]),_:1})]),_:1})])]),o("footer",me,[o("span",{innerHTML:z.value},null,8,pe)])],4)}}}),De=oe(de,[["__scopeId","data-v-22e83983"]]);export{De as default};
