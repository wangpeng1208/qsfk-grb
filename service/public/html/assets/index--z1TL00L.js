import{d as P,e as d,l as C,r as U,k as z,f as F,o as a,c as r,w as e,g as T,h as f,b as i,a as s,t as K,u as O,n as j,T as q,b$ as G,M as b,c0 as H,B as J}from"./index-Dys89YLq.js";import{p as Q}from"./global-DaymibWd.js";import{c as W,_ as X}from"./edit.vue_vue_type_script_setup_true_lang--tiYtoRt.js";import Y from"./chevron-right-EtMHiVUI.js";import Z from"./chevron-down-B8FHSk8L.js";import{I as ee}from"./index-B8o3bOvu.js";import{T as te}from"./index-BcNem8rV.js";import{L as oe}from"./index-C8u_RSpS.js";import{P as ne}from"./index-BV872pH_.js";import{S as ae}from"./index-DwGXmo2C.js";import{E as re}from"./index-DbnGGVSd.js";import{C as ie}from"./index-D8Ix0oeU.js";import"./icon-BF2trDGk.js";import"./index-9wlLuihG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Q2T2ZnL7.js";import"./helper-DDcUnKCP.js";import"./useVModel-ChUVkX5D.js";import"./dep-d524834c-s9Vwwbzr.js";import"./dep-86139c71-BioGcMu7.js";import"./dep-40320ba3-B1Ayvxeb.js";import"./dep-af55fe23-hzblXEZ8.js";import"./dep-96cefb8b-CiB99TH1.js";import"./common-CF_MvV9u.js";import"./index-k_yBcVp0.js";import"./useReadonly-GuO_-cT8.js";import"./log-ZJhmUOBa.js";import"./useResizeObserver-D_uTF440.js";import"./close-circle-filled-6NKz9kYY.js";import"./index-BYoZ1jRX.js";import"./form-model-CIY_RhMw.js";import"./dep-4cc4ef27--AW_KZeX.js";import"./index-DCyPEPAa.js";import"./index-fX6DPIvv.js";import"./useDefaultValue-pk1y0m3m.js";import"./index-BTVA41u8.js";import"./observe-CfjnoQGd.js";import"./slot-DKAjzcwC.js";import"./tree-store-ClV-hxBZ.js";import"./dep-eedf0c29-ErImML_u.js";import"./dep-6f8c2110-CYZdOZC2.js";import"./useVirtualScrollNew-B7BxRQci.js";import"./dep-02de0cb4-_xWusXWA.js";import"./index-BA1slVbh.js";import"./index-CjM8dnKg.js";import"./useCommonClassName-BZA0SnO7.js";import"./index-xCa1PnD5.js";import"./number-B3LVzGws.js";import"./index-Bqwwrko2.js";import"./index-BT8Ia4HF.js";import"./index-Dka09D2p.js";import"./index-Ci-WgI1t.js";import"./chevron-left-Ca8qIpvl.js";import"./chevron-right-Bz__VYX8.js";import"./dep-1858b432-DPK9DfHI.js";const se={class:"category-header c-flex"},me={class:"l"},lt=P({__name:"index",setup(pe){const y=d([]),N=(o,{type:n})=>o(n==="expand"?Y:Z),R=C(()=>N),u=d(null),l=d(!1);function w(){l.value=!l.value,A()}const A=async()=>{await q(),l.value?u.value.expandAll():u.value.foldAll()},_=d([]),h=async()=>{const o=await G({});o.code?_.value=o.data.list:b.error({content:o.msg,duration:0,closeBtn:!0})};h();const B=U({childrenKey:"children",treeNodeColumnIndex:0,indent:25,expandTreeNodeOnClick:!1}),g=d(),v=(o=0,n=0)=>{var m;(m=g.value)==null||m.init(o,n)},$=async o=>{const{msg:n}=await H({id:o});b.success(n),h()},E=z(),S=C(()=>({offsetTop:E.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(o,n)=>{const m=J,D=ee,p=te,x=oe,I=ne,V=ae,L=re,M=ie,c=F("perms");return a(),r(M,{title:"菜单管理",class:"basic-container",bordered:!1},{default:e(()=>[T("div",se,[T("div",me,[f((a(),r(m,{theme:"primary",onClick:n[0]||(n[0]=t=>v())},{default:e(()=>[i("添加")]),_:1})),[[c,["adminapi/permission/menu/add"]]]),s(m,{theme:"default",onClick:w},{default:e(()=>[i(K(l.value?"收起全部":"展开全部"),1)]),_:1})])]),s(L,{ref_key:"tableRef",ref:u,expandedTreeNodes:y.value,"onUpdate:expandedTreeNodes":n[1]||(n[1]=t=>y.value=t),"row-key":"id",data:_.value,columns:O(W),tree:B,hover:_.value.length>0,"max-height":"auto","table-layout":"auto","header-affixed-top":S.value,"tree-expand-and-fold-icon":R.value,"lazy-load":""},{icon:e(({row:t})=>[s(D,{name:t.icon},null,8,["name"])]),hidden:e(({row:t})=>[t.hidden==1?(a(),r(p,{key:0,theme:"danger",variant:"light"},{default:e(()=>[i("隐藏")]),_:1})):(a(),r(p,{key:1,theme:"success",variant:"light"},{default:e(()=>[i("显示")]),_:1}))]),type:e(({row:t})=>[t.type=="L"?(a(),r(p,{key:0,theme:"success",variant:"light"},{default:e(()=>[i("目录")]),_:1})):t.type=="M"?(a(),r(p,{key:1,theme:"primary",variant:"light"},{default:e(()=>[i("菜单")]),_:1})):t.type=="B"?(a(),r(p,{key:2,theme:"warning",variant:"light"},{default:e(()=>[i("按钮")]),_:1})):j("",!0)]),operate:e(({row:t})=>[s(V,null,{default:e(()=>[f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(0,t.id)},{default:e(()=>[i("添加")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/add"]]]),f((a(),r(x,{theme:"primary",hover:"color",onClick:k=>v(t.id)},{default:e(()=>[i("编辑")]),_:2},1032,["onClick"])),[[c,["adminapi/permission/menu/edit"]]]),s(I,{content:"确认删除吗",onConfirm:k=>$(t.id)},{default:e(()=>[f((a(),r(x,{theme:"danger",hover:"color"},{default:e(()=>[i(" 删除 ")]),_:1})),[[c,["adminapi/permission/menu/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1},8,["expandedTreeNodes","data","columns","tree","hover","header-affixed-top","tree-expand-and-fold-icon"]),s(X,{ref_key:"editRef",ref:g,onSuccess:h},null,512)]),_:1})}}});export{lt as default};
